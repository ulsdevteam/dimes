@import "../styles";

.minimap__wrapper {
  width: $minimap-width;
  height: calc(100vh - 60px);
  float: left;
  position: sticky;
  top: 60px;
  z-index: 998;
}

.minimap__wrapper--modal {
  width: 100%;
  height: calc(100% - 72px);
}

// -----------------------------------------------------------------------------
// Below this line has been copied from the styles library, except where noted
// -----------------------------------------------------------------------------

@mixin on-event($self: false) {
  @if $self {
    &,
    &:hover,
    &:active,
    &:focus {
      @content;
    }
  }

  @else {
    &:hover,
    &:active,
    &:focus {
      @content;
    }
  }
}

/**
* Creates classes .minimap--{{count}}-across that specify the number of
* 1fr grid-templates-columns between 1 and 20. For example, the
* .minimap--5-across class specifies 5 columns. For more than 20
* columns, adjust the $grid-col-count variable.
* 1. min of 24px ensures WCAG AA spec for target area size.
**/
$grid-col-count: 20;

@mixin grid-col-count-class {
  @for $count from 1 through $grid-col-count {
    .minimap--#{$count}-across {
      grid-template-columns: repeat($count, minmax(24px, 1fr)); /* 1 */
    }
  }
}

/**
* Mixin for minimap hit links with a "color" variable argument, including styles
* on hover, focus, or active events for minimap links.
* 1. Checkmark for visited links is located in the top right corner of the the box.
* 2. Styles for checkmark, which is visible via a color change once link is active
*    or has been visited.
**/
@mixin minimap-hit($color) {
  background: $color;
  color: $color;
  display: flex; /* 1 */
  justify-content: flex-end; /* 1 */
  text-decoration: none;
  margin: 0; // added

  @include on-event {
    border: 2px solid darken($color, 22%);
    color: $color;
    outline: none;
    text-decoration: none;
    transform: scale(1.3);
  }

  .material-icons { // class name changed
    align-self: flex-start; /* 1 */
    font-size: 12px; /* 2 */
  }

  &:visited {
    background-color: darken($color, 10%);
    color: $pure-white; /* 2 */
  }
}

/**
* Mixin for minimap hit links that are currently active with a "color" variable argument.
**/
@mixin minimap-hit-active ($color) {
  border: 3px solid darken($color, 22%);
  color: $pure-white;

  @include lg-up {
    border: 2px solid darken($color, 22%);
  }

  @include on-event {
    color: $pure-white;
  }
}

/**
* Styles for minimap that uses grid display. On medium and small screens, styles
* assume the minimap will be inside of a modal.
* 1. Increases gutter space between grid items on small screens.
**/
.minimap {
  align-content: start;
  display: grid;
  float: left;
  gap: 8px; /* 1 */
  grid-template-rows: auto;
  height: 100%;
  width: 100%;
  z-index: 998;

  @include lg-up {
    gap: 1px; /* 1 */
  }
}

/**
* Includes the classes to specify grid-template-columns number
**/
@include grid-col-count-class;

/**
* Styles for the minimap grid item boxes.
* 1. Ensures that the boxes are square.
**/
.minimap__box {
  aspect-ratio: 1/1; /* 1 */
  background-color: $neutral-sand;
  border-radius: 3px;
  box-sizing: border-box;

  @include lg-up {
    border-radius: 2px;
  }
}

/**
* Styles for the minimap links.
**/
.minimap__digital-hit {
  @include minimap-hit($deep-blue);
}

.minimap__record-hit {
  @include minimap-hit($burnt-orange);
}

/**
* Styles for the minimap links that are currently active.
**/
.minimap__digital-hit--active {
  @include minimap-hit-active($deep-blue);
}

.minimap__record-hit--active {
  @include minimap-hit-active ($burnt-orange);
}
