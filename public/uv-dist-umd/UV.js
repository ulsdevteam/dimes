!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("UV",[],t):"object"==typeof exports?exports.UV=t():e.UV=t()}(window,(function(){return function(e){function t(t){for(var n,r,o=t[0],a=t[1],s=0,u=[];s<o.length;s++)r=o[s],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&u.push(i[r][0]),i[r]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(c&&c(t);u.length;)u.shift()()}var n={},i={14:0};function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,r){n=i[e]=[t,r]}));t.push(n[2]=o);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.src=function(e){return r.p+""+({2:"uv-aleph-extension~uv-default-extension~uv-ebook-extension~uv-mediaelement-extension~uv-model-viewer~d066739a",3:"vendors~uv-aleph-extension~uv-default-extension~uv-ebook-extension~uv-mediaelement-extension~uv-mode~d6e026a8",4:"vendors~uv-model-viewer-extension~uv-openseadragon-extension",15:"pdfjs",16:"pdfobject",17:"uv-aleph-extension",18:"uv-default-extension",19:"uv-ebook-extension",20:"uv-mediaelement-extension",21:"uv-model-viewer-extension",22:"uv-openseadragon-extension",23:"uv-pdf-extension",24:"vendors~pdfjs",25:"vendors~uv-aleph-extension",26:"vendors~uv-ebook-extension",27:"vendors~uv-mediaelement-extension",28:"vendors~uv-model-viewer-extension",29:"vendors~uv-openseadragon-extension"}[e]||e)+"."+{0:"01de07f2dd4b75c05a3f",1:"c141b3012697b8b92695",2:"fad22f1d5eb29a81e38b",3:"9b0f7a15ac93fcf8cce5",4:"91a040c45423ec016fbf",5:"05a1d543040706bd5c5a",6:"e3e48f7301a4b6ba13b1",7:"bb147d62c43e3f0d800e",8:"95e8d640fab60bf77e3d",9:"6be40e3eda86e54cbb44",10:"3b8c97f25eb7004d187f",11:"03474909d99c65a7f5d8",12:"a8899d412286e7dade40",13:"8da05d255e9063f89a39",15:"ea7c6bfa899760a49306",16:"8768ccc7e79353f4ede1",17:"86ba55f9ada982d5b9f4",18:"b9ee03e03abddf5bd322",19:"2f338bd1656b30119267",20:"4dcbb08c46dd2f44c7dc",21:"be0eca7fbf75cc0c83e7",22:"551aee961b1ef8ff74d8",23:"2f8835efc927d19a4fa3",24:"0c3cff10fdce48cfe5e9",25:"6bf61c52ff1b93862179",26:"1fc13a1fc77e79a4ca1e",27:"7c0e0afaed2b159b5325",28:"34fddb78a74476002dc4",29:"48a46434a34ecdbff01b",30:"89f5b590dd4d74234694",31:"40670e88dc3fbeddb3af",32:"81c48dbd413c6e8acaa4",33:"ee93e9b8304695cf44ff",34:"964a8d3b4f1df55866ba",35:"6b4ca7dc21b9d508c50e",36:"742ee59cdecf6ee1d352",37:"d3732871e4bd87529161",38:"eb6696d5decc8a76edfe",39:"7f5630eb35c4f8078bb4",40:"ddd427ebab662d235f47",41:"2254a68b333dbb3d7fd8",42:"e0d9610b4f4ff7bda8e4",43:"c457a78af4f5d6698122",44:"da9218f5618c2b4ff810",45:"2857dd7742aadf1bbf0d",46:"36949b80e55d44f5ecd4",47:"70ba8b8cd883232282a5",48:"6432a654cd78a9ab3a26",49:"59d77964477f967b2461",50:"61e05643189eb5dc0dc5",51:"cdc17717f5cdceaf7698",52:"7a727b89b2c96eadf647",53:"7ca0e471c0ad0cdf67e5",54:"d4e5bb1f402820460d16",55:"549ee916c2b2b7889ddc",56:"be466dc5b52902763d2f",57:"559eae4401968ac013f6",58:"77ab5b86cbea88d2f057",59:"80d99dad6875c8d8496b",60:"740df8dbeb27c7f35c29",61:"84f12f93f1730680ed2f",62:"32c132e1a96164cf1aee",63:"747e764cfa246471bcb4",64:"eb8a75809431e25988bf",65:"0c957b69df6c2323d144",66:"7ac151fd6873e3b1a7ba",67:"bfa9e05d856d9b2bff17",68:"e5f42c502befc1fab143",69:"bd48321624a2d4591795",70:"54e5304b65186ba137a0",71:"e2e4a4341fb1dea01e78",72:"9b526400c07e24a9c60c",73:"2fe3c7362519d73fa658",74:"ec62a863c9bf8a6d4be3",75:"2a2d060dd60cff574fbc",76:"b238505ac30c1f189a69",77:"e652588137d37fc038e6",78:"5377b4040dad5a5878d9",79:"110cd320e7878fe8b0ce",80:"aefe63f14efd9abff396",81:"cebc244424ad613e584f",82:"8d38a2f53e54db9a04d1",83:"befc18595fbd367249d1",84:"b99ad6487e37c02af9b6",85:"30a8354f606691fe7e0e",86:"7a17d1dcc8d269e29e77",87:"300ea1454e31794808c7",88:"f384abb8ff5898a5ae1a",89:"0cb96a3fab731f98ead2",90:"966e6270c2f494d9a301",91:"2a8dc9bd0ecfb4727924",92:"4157d8c5b7e82b24c04c",93:"7aff0623eef97eca4709",94:"23f4f3cdd09aefc22ddd",95:"0a3e8bb435da7e5bc7f3",96:"b7fb0c024ca33763b43d",97:"80c47f0eb3fc2dd23bb9",98:"61d62ad3523a9dd2bbbf",99:"89da0f3508eab8e62d7e",100:"8e2f92dd6b812aab8b63",101:"1c4fe40b7a6f6c0c5642",102:"d047b5c9ec6d36ae3c9b",103:"f760eba2c0791da24b83",104:"fb2e8b3fa74afa5d8e2a",105:"bd6dadd2af799096d5e8",106:"3ce86e87eda6a26c297d",107:"a0541144a2641aa8fc6c",108:"690ccd65e23622485675",109:"c3898ca8ee1022dd8fa5",110:"0a978c1cdb2d6c6c012c",111:"7e227ebfc3befee4f0d6",112:"a6ba7f175c5fe5d61de3",113:"9d4a3a3bb48ae977dd25",114:"b92fa7e250e36d3e483f",115:"270c4df55f2d39a9dcd4",116:"f0f16a72ab80f8aef8e1",117:"fa7c1107b5f7a6a9f67b",118:"e8e2bc98c1a89f16a9b5",119:"68e752f40be1193fd44a",120:"32079df794daecfbee5e",121:"3667d84bc93ff776e966",122:"714e4b1598f42d7fbc26",123:"1a537bf88997af9f9c12",124:"e87079adea526d05657b",125:"27b36b616cb67d4b4b2e",126:"52146d3f35e5dff11173",127:"a5bc05ff8b599e1e8942",128:"8460a0b35dd0f7a0f083",129:"00a46f1b56b5c36d2080",130:"f8e77e9a08ea2c8424a8",131:"e432a9459500a5ac2d68",132:"7eaa68569a0f4d768957",133:"3648f76171db774c438f",134:"7e429db6670852479915",135:"383d52e467a2df4f5d0b",136:"72bad9fa22c55c296fcf",137:"e7aecc2f8f0c8b43a9e1",138:"b6bc3a0ba10269609159",139:"79876a92b9d43d64451f",140:"a68215aa5c93902f5534",141:"478f2110c1fae9278430",142:"b215eeced024cbc3dad1",143:"4e05efc8c3c81c9b5e63",144:"1f1e51968a7a8845ce04",145:"a3131dbc791ea4a09c22",146:"b816a3e4c297550826b6",147:"0f9de19b9a4238ae61a6",148:"9ddc4f69682ea51e1987",149:"e87f45b780cd7ba1c032",150:"30c5282175f0796fda88",151:"cd8af395d39e4ae3e3f5",152:"7c34f93f78e12a6610cb",153:"a0b668cbae1d2ddb23cb",154:"7e3e68c3ff152aab3c75",155:"f4fc22fccad1f31f1381",156:"9b3a2d9e592d314c7f2f",157:"2e94d7653a5eb36c4393",158:"a66f8fb95200f66fe4ad",159:"1e4fe31b5d0cd0eda868",160:"2256d9302a891044a7b6",161:"5ca03abdd37c7136925b",162:"4f2a61650fae851285fc",163:"8f3667609c48d3f38b32",164:"174892526bfecfd8e6be",165:"f80c0c2a475472b41e9b",166:"8b03dc7989a23346fdbb",167:"199de0cb67ebd52fff00"}[e]+".js"}(e);var c=new Error;a=function(t){s.onerror=s.onload=null,clearTimeout(u);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",c.name="ChunkLoadError",c.type=r,c.request=o,n[1](c)}i[e]=void 0}};var u=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(t)},r.m=e,r.c=n,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/uv-dist-umd/",r.oe=function(e){throw console.error(e),e};var o=window.webpackJsonpUV=window.webpackJsonpUV||[],a=o.push.bind(o);o.push=t,o=o.slice();for(var s=0;s<o.length;s++)t(o[s]);var c=a;return r(r.s=7)}([function(e,t,n){"use strict";var i,r,o,a,s,c,u,l,f;n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return f})),function(e){e.BOOKMARKING="oa:bookmarking",e.CLASSIFYING="oa:classifying",e.COMMENTING="oa:commenting",e.DESCRIBING="oa:describing",e.EDITING="oa:editing",e.HIGHLIGHTING="oa:highlighting",e.IDENTIFYING="oa:identifying",e.LINKING="oa:linking",e.MODERATING="oa:moderating",e.PAINTING="sc:painting",e.QUESTIONING="oa:questioning",e.REPLYING="oa:replying",e.TAGGING="oa:tagging",e.TRANSCRIBING="oad:transcribing"}(i||(i={})),function(e){e.AUTO_ADVANCE="auto-advance",e.CONTINUOUS="continuous",e.FACING_PAGES="facing-pages",e.HIDDEN="hidden",e.INDIVIDUALS="individuals",e.MULTI_PART="multi-part",e.NO_NAV="no-nav",e.NON_PAGED="non-paged",e.PAGED="paged",e.REPEAT="repeat",e.SEQUENCE="sequence",e.THUMBNAIL_NAV="thumbnail-nav",e.TOGETHER="together",e.UNORDERED="unordered"}(r||(r={})),function(e){e.CANVAS="canvas",e.CHOICE="choice",e.CONTENT_AS_TEXT="contentastext",e.DATASET="dataset",e.DOCUMENT="document",e.IMAGE="image",e.MODEL="model",e.MOVING_IMAGE="movingimage",e.PDF="pdf",e.PHYSICAL_OBJECT="physicalobject",e.SOUND="sound",e.TEXT="text",e.TEXTUALBODY="textualbody",e.VIDEO="video"}(o||(o={})),function(e){e.ANNOTATION="annotation",e.CANVAS="canvas",e.COLLECTION="collection",e.MANIFEST="manifest",e.RANGE="range",e.SEQUENCE="sequence"}(a||(a={})),function(e){e.AUDIO_MP4="audio/mp4",e.CORTO="application/corto",e.DRACO="application/draco",e.EPUB="application/epub+zip",e.GLB="model/gltf-binary",e.GLTF="model/gltf+json",e.JPG="image/jpeg",e.M3U8="application/vnd.apple.mpegurl",e.MP3="audio/mp3",e.MPEG_DASH="application/dash+xml",e.OBJ="text/plain",e.OPF="application/oebps-package+xml",e.PDF="application/pdf",e.PLY="application/ply",e.THREEJS="application/vnd.threejs+json",e.USDZ="model/vnd.usd+zip",e.VIDEO_MP4="video/mp4",e.WEBM="video/webm"}(s||(s={})),function(e){e.DOC="application/msword",e.DOCX="application/vnd.openxmlformats-officedocument.wordprocessingml.document",e.PDF="application/pdf"}(c||(c={})),function(e){e.IMAGE_0_COMPLIANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/compliance.html#level0",e.IMAGE_0_COMPLIANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/compliance.html#level1",e.IMAGE_0_COMPLIANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/compliance.html#level2",e.IMAGE_0_CONFORMANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/conformance.html#level0",e.IMAGE_0_CONFORMANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/conformance.html#level1",e.IMAGE_0_CONFORMANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/conformance.html#level2",e.IMAGE_1_COMPLIANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",e.IMAGE_1_COMPLIANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",e.IMAGE_1_COMPLIANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",e.IMAGE_1_CONFORMANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",e.IMAGE_1_CONFORMANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",e.IMAGE_1_CONFORMANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",e.IMAGE_1_LEVEL_0="http://iiif.io/api/image/1/level0.json",e.IMAGE_1_PROFILE_LEVEL_0="http://iiif.io/api/image/1/profiles/level0.json",e.IMAGE_1_LEVEL_1="http://iiif.io/api/image/1/level1.json",e.IMAGE_1_PROFILE_LEVEL_1="http://iiif.io/api/image/1/profiles/level1.json",e.IMAGE_1_LEVEL_2="http://iiif.io/api/image/1/level2.json",e.IMAGE_1_PROFILE_LEVEL_2="http://iiif.io/api/image/1/profiles/level2.json",e.IMAGE_2_LEVEL_0="http://iiif.io/api/image/2/level0.json",e.IMAGE_2_PROFILE_LEVEL_0="http://iiif.io/api/image/2/profiles/level0.json",e.IMAGE_2_LEVEL_1="http://iiif.io/api/image/2/level1.json",e.IMAGE_2_PROFILE_LEVEL_1="http://iiif.io/api/image/2/profiles/level1.json",e.IMAGE_2_LEVEL_2="http://iiif.io/api/image/2/level2.json",e.IMAGE_2_PROFILE_LEVEL_2="http://iiif.io/api/image/2/profiles/level2.json",e.AUTH_0_CLICK_THROUGH="http://iiif.io/api/auth/0/login/clickthrough",e.AUTH_0_LOGIN="http://iiif.io/api/auth/0/login",e.AUTH_0_LOGOUT="http://iiif.io/api/auth/0/logout",e.AUTH_0_RESTRICTED="http://iiif.io/api/auth/0/login/restricted",e.AUTH_0_TOKEN="http://iiif.io/api/auth/0/token",e.AUTH_1_CLICK_THROUGH="http://iiif.io/api/auth/1/clickthrough",e.AUTH_1_EXTERNAL="http://iiif.io/api/auth/1/external",e.AUTH_1_KIOSK="http://iiif.io/api/auth/1/kiosk",e.AUTH_1_LOGIN="http://iiif.io/api/auth/1/login",e.AUTH_1_LOGOUT="http://iiif.io/api/auth/1/logout",e.AUTH_1_PROBE="http://iiif.io/api/auth/1/probe",e.AUTH_1_TOKEN="http://iiif.io/api/auth/1/token",e.SEARCH_0="http://iiif.io/api/search/0/search",e.SEARCH_0_AUTO_COMPLETE="http://iiif.io/api/search/0/autocomplete",e.SEARCH_1="http://iiif.io/api/search/1/search",e.SEARCH_1_AUTO_COMPLETE="http://iiif.io/api/search/1/autocomplete",e.TRACKING_EXTENSIONS="http://universalviewer.io/tracking-extensions-profile",e.UI_EXTENSIONS="http://universalviewer.io/ui-extensions-profile",e.PRINT_EXTENSIONS="http://universalviewer.io/print-extensions-profile",e.SHARE_EXTENSIONS="http://universalviewer.io/share-extensions-profile",e.OTHER_MANIFESTATIONS="http://iiif.io/api/otherManifestations.json",e.IXIF="http://wellcomelibrary.org/ld/ixif/0/alpha.json"}(u||(u={})),function(e){e.BOTTOM_TO_TOP="bottom-to-top",e.LEFT_TO_RIGHT="left-to-right",e.RIGHT_TO_LEFT="right-to-left",e.TOP_TO_BOTTOM="top-to-bottom"}(l||(l={})),function(e){e.CONTINUOUS="continuous",e.INDIVIDUALS="individuals",e.NON_PAGED="non-paged",e.PAGED="paged",e.TOP="top"}(f||(f={}))},function(e,t,n){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(6)),i(n(7)),i(n(8)),i(n(9)),i(n(10)),i(n(11)),i(n(12)),i(n(13)),i(n(14)),i(n(15)),i(n(16)),i(n(17)),i(n(18)),i(n(19)),i(n(20)),i(n(21)),i(n(22)),i(n(23)),i(n(24)),i(n(25)),i(n(26)),i(n(27)),i(n(28)),i(n(29)),i(n(30)),i(n(31)),i(n(32)),i(n(2))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.BOOKMARKING="oa:bookmarking",e.CLASSIFYING="oa:classifying",e.COMMENTING="oa:commenting",e.DESCRIBING="oa:describing",e.EDITING="oa:editing",e.HIGHLIGHTING="oa:highlighting",e.IDENTIFYING="oa:identifying",e.LINKING="oa:linking",e.MODERATING="oa:moderating",e.PAINTING="sc:painting",e.QUESTIONING="oa:questioning",e.REPLYING="oa:replying",e.TAGGING="oa:tagging",e.TRANSCRIBING="oad:transcribing"}(t.AnnotationMotivation||(t.AnnotationMotivation={})),function(e){e.AUTO_ADVANCE="auto-advance",e.CONTINUOUS="continuous",e.FACING_PAGES="facing-pages",e.HIDDEN="hidden",e.INDIVIDUALS="individuals",e.MULTI_PART="multi-part",e.NO_NAV="no-nav",e.NON_PAGED="non-paged",e.PAGED="paged",e.REPEAT="repeat",e.SEQUENCE="sequence",e.THUMBNAIL_NAV="thumbnail-nav",e.TOGETHER="together",e.UNORDERED="unordered"}(t.Behavior||(t.Behavior={})),function(e){e.CANVAS="canvas",e.CHOICE="choice",e.CONTENT_AS_TEXT="contentastext",e.DOCUMENT="document",e.IMAGE="image",e.MOVING_IMAGE="movingimage",e.PDF="pdf",e.PHYSICAL_OBJECT="physicalobject",e.SOUND="sound",e.TEXTUALBODY="textualbody",e.VIDEO="video"}(t.ExternalResourceType||(t.ExternalResourceType={})),function(e){e.ANNOTATION="annotation",e.CANVAS="canvas",e.COLLECTION="collection",e.MANIFEST="manifest",e.RANGE="range",e.SEQUENCE="sequence"}(t.IIIFResourceType||(t.IIIFResourceType={})),function(e){e.AUDIO_MP4="audio/mp4",e.CORTO="application/corto",e.DRACO="application/draco",e.GLTF="model/gltf+json",e.JPG="image/jpeg",e.M3U8="application/vnd.apple.mpegurl",e.MP3="audio/mp3",e.MPEG_DASH="application/dash+xml",e.OBJ="text/plain",e.PDF="application/pdf",e.PLY="application/ply",e.THREEJS="application/vnd.threejs+json",e.VIDEO_MP4="video/mp4",e.WEBM="video/webm"}(t.MediaType||(t.MediaType={})),function(e){e.DOC="application/msword",e.DOCX="application/vnd.openxmlformats-officedocument.wordprocessingml.document",e.PDF="application/pdf"}(t.RenderingFormat||(t.RenderingFormat={})),function(e){e.IMAGE_0_COMPLIANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/compliance.html#level0",e.IMAGE_0_COMPLIANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/compliance.html#level1",e.IMAGE_0_COMPLIANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/compliance.html#level2",e.IMAGE_0_CONFORMANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/conformance.html#level0",e.IMAGE_0_CONFORMANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/conformance.html#level1",e.IMAGE_0_CONFORMANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/conformance.html#level2",e.IMAGE_1_COMPLIANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0",e.IMAGE_1_COMPLIANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1",e.IMAGE_1_COMPLIANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2",e.IMAGE_1_CONFORMANCE_LEVEL_0="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0",e.IMAGE_1_CONFORMANCE_LEVEL_1="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1",e.IMAGE_1_CONFORMANCE_LEVEL_2="http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2",e.IMAGE_1_LEVEL_0="http://iiif.io/api/image/1/level0.json",e.IMAGE_1_PROFILE_LEVEL_0="http://iiif.io/api/image/1/profiles/level0.json",e.IMAGE_1_LEVEL_1="http://iiif.io/api/image/1/level1.json",e.IMAGE_1_PROFILE_LEVEL_1="http://iiif.io/api/image/1/profiles/level1.json",e.IMAGE_1_LEVEL_2="http://iiif.io/api/image/1/level2.json",e.IMAGE_1_PROFILE_LEVEL_2="http://iiif.io/api/image/1/profiles/level2.json",e.IMAGE_2_LEVEL_0="http://iiif.io/api/image/2/level0.json",e.IMAGE_2_PROFILE_LEVEL_0="http://iiif.io/api/image/2/profiles/level0.json",e.IMAGE_2_LEVEL_1="http://iiif.io/api/image/2/level1.json",e.IMAGE_2_PROFILE_LEVEL_1="http://iiif.io/api/image/2/profiles/level1.json",e.IMAGE_2_LEVEL_2="http://iiif.io/api/image/2/level2.json",e.IMAGE_2_PROFILE_LEVEL_2="http://iiif.io/api/image/2/profiles/level2.json",e.AUTH_0_CLICK_THROUGH="http://iiif.io/api/auth/0/login/clickthrough",e.AUTH_0_LOGIN="http://iiif.io/api/auth/0/login",e.AUTH_0_LOGOUT="http://iiif.io/api/auth/0/logout",e.AUTH_0_RESTRICTED="http://iiif.io/api/auth/0/login/restricted",e.AUTH_0_TOKEN="http://iiif.io/api/auth/0/token",e.AUTH_1_CLICK_THROUGH="http://iiif.io/api/auth/1/clickthrough",e.AUTH_1_EXTERNAL="http://iiif.io/api/auth/1/external",e.AUTH_1_KIOSK="http://iiif.io/api/auth/1/kiosk",e.AUTH_1_LOGIN="http://iiif.io/api/auth/1/login",e.AUTH_1_LOGOUT="http://iiif.io/api/auth/1/logout",e.AUTH_1_PROBE="http://iiif.io/api/auth/1/probe",e.AUTH_1_TOKEN="http://iiif.io/api/auth/1/token",e.SEARCH_0="http://iiif.io/api/search/0/search",e.SEARCH_0_AUTO_COMPLETE="http://iiif.io/api/search/0/autocomplete",e.SEARCH_1="http://iiif.io/api/search/1/search",e.SEARCH_1_AUTO_COMPLETE="http://iiif.io/api/search/1/autocomplete",e.TRACKING_EXTENSIONS="http://universalviewer.io/tracking-extensions-profile",e.UI_EXTENSIONS="http://universalviewer.io/ui-extensions-profile",e.PRINT_EXTENSIONS="http://universalviewer.io/print-extensions-profile",e.SHARE_EXTENSIONS="http://universalviewer.io/share-extensions-profile",e.OTHER_MANIFESTATIONS="http://iiif.io/api/otherManifestations.json",e.IXIF="http://wellcomelibrary.org/ld/ixif/0/alpha.json"}(t.ServiceProfile||(t.ServiceProfile={})),function(e){e.BOTTOM_TO_TOP="bottom-to-top",e.LEFT_TO_RIGHT="left-to-right",e.RIGHT_TO_LEFT="right-to-left",e.TOP_TO_BOTTOM="top-to-bottom"}(t.ViewingDirection||(t.ViewingDirection={})),function(e){e.CONTINUOUS="continuous",e.INDIVIDUALS="individuals",e.NON_PAGED="non-paged",e.PAGED="paged",e.TOP="top"}(t.ViewingHint||(t.ViewingHint={}))},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(1),s=n(33);n(34);var c=function(){function e(){}return e.getMediaType=function(e){return(e=(e=e.toLowerCase()).split(";")[0]).trim()},e.getImageQuality=function(e){return e===a.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_1||e===a.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_2||e===a.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_1||e===a.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_2||e===a.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_1||e===a.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_2||e===a.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_1||e===a.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_2||e===a.ServiceProfile.IMAGE_1_LEVEL_1||e===a.ServiceProfile.IMAGE_1_PROFILE_LEVEL_1||e===a.ServiceProfile.IMAGE_1_LEVEL_2||e===a.ServiceProfile.IMAGE_1_PROFILE_LEVEL_2?"native":"default"},e.getInexactLocale=function(e){return-1!==e.indexOf("-")?e.substr(0,e.indexOf("-")):e},e.getLocalisedValue=function(e,t){if(!Array.isArray(e))return e;for(var n=0;n<e.length;n++){var i=e[n];if(t===i["@language"])return i["@value"]}var r=t.substr(0,t.indexOf("-"));for(n=0;n<e.length;n++){var o=e[n];if(o["@language"]===r)return o["@value"]}return null},e.generateTreeNodeIds=function(t,n){var i;void 0===n&&(n=0),i=t.parentNode?t.parentNode.id+"-"+n:"0",t.id=i;for(var r=0;r<t.nodes.length;r++){var o=t.nodes[r];e.generateTreeNodeIds(o,r)}},e.normaliseType=function(e){return-1!==(e=e.toLowerCase()).indexOf(":")?e.split(":")[1]:e},e.normaliseUrl=function(e){return-1!==(e=e.substr(e.indexOf("://"))).indexOf("#")&&(e=e.split("#")[0]),e},e.normalisedUrlsMatch=function(t,n){return e.normaliseUrl(t)===e.normaliseUrl(n)},e.isImageProfile=function(t){return!!(e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_PROFILE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_PROFILE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_PROFILE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_PROFILE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_PROFILE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_PROFILE_LEVEL_2))},e.isLevel0ImageProfile=function(t){return!!(e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_PROFILE_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_LEVEL_0)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_PROFILE_LEVEL_0))},e.isLevel1ImageProfile=function(t){return!!(e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_PROFILE_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_LEVEL_1)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_PROFILE_LEVEL_1))},e.isLevel2ImageProfile=function(t){return!!(e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_1_PROFILE_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_LEVEL_2)||e.normalisedUrlsMatch(t,a.ServiceProfile.IMAGE_2_PROFILE_LEVEL_2))},e.parseManifest=function(e,t){return o.Deserialiser.parse(e,t)},e.checkStatus=function(e){if(e.ok)return e;var t=new Error(e.statusText);return t.response=e,Promise.reject(t)},e.loadManifest=function(t){return new Promise((function(n){fetch(t).then(e.checkStatus).then((function(e){return e.json()})).then((function(e){n(e)}))}))},e.loadExternalResourcesAuth1=function(t,n,i,r,o,a,s,c){return new Promise((function(u,l){var f=t.map((function(t){return e.loadExternalResourceAuth1(t,n,i,r,o,a,s,c)}));Promise.all(f).then((function(){u(t)})).catch((function(e){l(e)}))}))},e.loadExternalResourceAuth1=function(t,n,o,a,c,u,l,f){return i(this,void 0,void 0,(function(){var i;return r(this,(function(r){switch(r.label){case 0:return[4,a(t)];case 1:return(i=r.sent())?[4,t.getData(i)]:[3,6];case 2:return r.sent(),t.status!==s.OK?[3,3]:[2,t];case 3:return[4,e.doAuthChain(t,n,o,c,u,l,f)];case 4:r.sent(),r.label=5;case 5:if(t.status===s.OK||t.status===s.MOVED_TEMPORARILY)return[2,t];throw e.createAuthorizationFailedError();case 6:return[4,t.getData()];case 7:return r.sent(),t.status!==s.MOVED_TEMPORARILY&&t.status!==s.UNAUTHORIZED?[3,9]:[4,e.doAuthChain(t,n,o,c,u,l,f)];case 8:r.sent(),r.label=9;case 9:if(t.status===s.OK||t.status===s.MOVED_TEMPORARILY)return[2,t];throw e.createAuthorizationFailedError()}}))}))},e.doAuthChain=function(t,n,o,a,c,u,l){return i(this,void 0,void 0,(function(){var i,f,h,p,d,g,_,E;return r(this,(function(r){switch(r.label){case 0:return t.isAccessControlled()?((i=t.externalService)&&(i.options=t.options),(f=t.kioskService)&&(f.options=t.options),(h=t.clickThroughService)&&(h.options=t.options),(p=t.loginService)&&(p.options=t.options),t.isResponseHandled||t.status!==s.MOVED_TEMPORARILY?[3,2]:[4,u(t)]):[2,t];case 1:return r.sent(),[2,t];case 2:return d=null,g=null,(d=i)?(g=d,[4,e.attemptResourceWithToken(t,o,d)]):[3,4];case 3:return r.sent(),[2,t];case 4:return(d=f)?(g=d,(_=n(d))?[4,a(_)]:[3,7]):[3,7];case 5:return r.sent(),[4,e.attemptResourceWithToken(t,o,d)];case 6:return r.sent(),[2,t];case 7:return(d=h)?(g=d,[4,c(t,d)]):[3,11];case 8:return(E=r.sent())?[4,a(E)]:[3,11];case 9:return r.sent(),[4,e.attemptResourceWithToken(t,o,d)];case 10:return r.sent(),[2,t];case 11:return(d=p)?(g=d,[4,c(t,d)]):[3,15];case 12:return(E=r.sent())?[4,a(E)]:[3,15];case 13:return r.sent(),[4,e.attemptResourceWithToken(t,o,d)];case 14:return r.sent(),[2,t];case 15:return g&&l(t,g),[2]}}))}))},e.attemptResourceWithToken=function(e,t,n){return i(this,void 0,void 0,(function(){var i,o;return r(this,(function(r){switch(r.label){case 0:return(i=n.getService(a.ServiceProfile.AUTH_1_TOKEN))?[4,t(e,i)]:[3,3];case 1:return(o=r.sent())&&o.accessToken?[4,e.getData(o)]:[3,3];case 2:return r.sent(),[2,e];case 3:return[2]}}))}))},e.loadExternalResourcesAuth09=function(t,n,i,r,o,a,s,c,u,l){return new Promise((function(f,h){var p=t.map((function(t){return e.loadExternalResourceAuth09(t,n,i,r,o,a,s,c,u,l)}));Promise.all(p).then((function(){f(t)})).catch((function(e){h(e)}))}))},e.loadExternalResourceAuth09=function(t,n,i,r,o,a,c,u,l,f){return new Promise((function(h,p){f&&f.pessimisticAccessControl?t.getData().then((function(){t.isAccessControlled()?t.clickThroughService?(h(i(t)),h(r(t))):o(t).then((function(){a(t,!0).then((function(n){t.getData(n).then((function(){h(l(t))})).catch((function(t){p(e.createInternalServerError(t))}))})).catch((function(t){p(e.createInternalServerError(t))}))})).catch((function(t){p(e.createInternalServerError(t))})):h(t)})).catch((function(t){p(e.createInternalServerError(t))})):u(t,n).then((function(f){f?t.getData(f).then((function(){t.status===s.OK?h(l(t)):e.authorize(t,n,i,r,o,a,c,u).then((function(){h(l(t))})).catch((function(t){p(e.createAuthorizationFailedError())}))})).catch((function(t){p(e.createAuthorizationFailedError())})):e.authorize(t,n,i,r,o,a,c,u).then((function(){h(l(t))})).catch((function(t){p(e.createAuthorizationFailedError())}))})).catch((function(t){p(e.createAuthorizationFailedError())}))}))},e.createError=function(e,t){var n=new Error;return n.message=t,n.name=String(e),n},e.createAuthorizationFailedError=function(){return e.createError(o.StatusCode.AUTHORIZATION_FAILED,"Authorization failed")},e.createRestrictedError=function(){return e.createError(o.StatusCode.RESTRICTED,"Restricted")},e.createInternalServerError=function(t){return e.createError(o.StatusCode.INTERNAL_SERVER_ERROR,t)},e.authorize=function(t,n,i,r,o,a,c,u){return new Promise((function(l,f){t.getData().then((function(){t.isAccessControlled()?u(t,n).then((function(u){u?t.getData(u).then((function(){t.status===s.OK?l(t):e.showAuthInteraction(t,n,i,r,o,a,c,l,f)})).catch((function(t){f(e.createInternalServerError(t))})):a(t,!1).then((function(u){u?c(t,u,n).then((function(){t.getData(u).then((function(){t.status===s.OK?l(t):e.showAuthInteraction(t,n,i,r,o,a,c,l,f)})).catch((function(t){f(e.createInternalServerError(t))}))})).catch((function(t){f(e.createInternalServerError(t))})):e.showAuthInteraction(t,n,i,r,o,a,c,l,f)}))})).catch((function(t){f(e.createInternalServerError(t))})):l(t)}))}))},e.showAuthInteraction=function(t,n,i,r,o,a,c,u,l){t.status!==s.MOVED_TEMPORARILY||t.isResponseHandled?t.clickThroughService&&!t.isResponseHandled?i(t).then((function(){a(t,!0).then((function(i){c(t,i,n).then((function(){t.getData(i).then((function(){u(t)})).catch((function(t){l(e.createInternalServerError(t))}))})).catch((function(t){l(e.createInternalServerError(t))}))})).catch((function(t){l(e.createInternalServerError(t))}))})):o(t).then((function(){a(t,!0).then((function(i){c(t,i,n).then((function(){t.getData(i).then((function(){u(t)})).catch((function(t){l(e.createInternalServerError(t))}))})).catch((function(t){l(e.createInternalServerError(t))}))})).catch((function(t){l(e.createInternalServerError(t))}))})):u(t)},e.getService=function(e,t){for(var n=this.getServices(e),i=0;i<n.length;i++){var r=n[i];if(r.getProfile()===t)return r}return null},e.getResourceById=function(t,n){return e.traverseAndFind(t.__jsonld,"@id",n)},e.traverseAndFind=function(t,n,i){if(t.hasOwnProperty(n)&&t[n]===i)return t;for(var r=0;r<Object.keys(t).length;r++)if("object"==typeof t[Object.keys(t)[r]]){var o=e.traverseAndFind(t[Object.keys(t)[r]],n,i);if(null!=o)return o}},e.getServices=function(e){var t,n=[];if(!(t=e.__jsonld?e.__jsonld.service:e.service))return n;Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var r=t[i];if("string"==typeof r){var a=this.getResourceById(e.options.resource,r);a&&n.push(new o.Service(a.__jsonld||a,e.options))}else n.push(new o.Service(r,e.options))}return n},e.getTemporalComponent=function(e){var t=/t=([^&]+)/g.exec(e),n=null;return t&&t[1]&&(n=t[1].split(",")),n},e}();t.Utils=c},function(e,t,n){"use strict";n.r(t),t.default=function(e,t){return t=t||{},new Promise((function(n,i){var r=new XMLHttpRequest,o=[],a=[],s={},c=function(){return{ok:2==(r.status/100|0),statusText:r.statusText,status:r.status,url:r.responseURL,text:function(){return Promise.resolve(r.responseText)},json:function(){return Promise.resolve(JSON.parse(r.responseText))},blob:function(){return Promise.resolve(new Blob([r.response]))},clone:c,headers:{keys:function(){return o},entries:function(){return a},get:function(e){return s[e.toLowerCase()]},has:function(e){return e.toLowerCase()in s}}}};for(var u in r.open(t.method||"get",e,!0),r.onload=function(){r.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,n){o.push(t=t.toLowerCase()),a.push([t,n]),s[t]=s[t]?s[t]+","+n:n})),n(c())},r.onerror=i,r.withCredentials="include"==t.credentials,t.headers)r.setRequestHeader(u,t.headers[u]);r.send(t.body||null)}))}},function(e,t,n){e.exports=n(5)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(0));var i=n(2);t.loadManifest=function(e){return i.Utils.loadManifest(e)},t.parseManifest=function(e,t){return i.Utils.parseManifest(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.__jsonld=e,this.context=this.getProperty("context"),this.id=this.getProperty("id")}return e.prototype.getProperty=function(e){var t=null;return this.__jsonld&&((t=this.__jsonld[e])||(t=this.__jsonld["@"+e])),t},e}();t.JSONLDResource=i},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(1),s=function(e){function t(t,n){var i=e.call(this,t)||this;return i.options=n,i}return r(t,e),t.prototype.getIIIFResourceType=function(){return o.Utils.normaliseType(this.getProperty("type"))},t.prototype.getLabel=function(){var e=this.getProperty("label");return e?o.LanguageMap.parse(e,this.options.locale):[]},t.prototype.getDefaultLabel=function(){return o.LanguageMap.getValue(this.getLabel())},t.prototype.getMetadata=function(){var e=this.getProperty("metadata"),t=[];if(!e)return t;for(var n=0;n<e.length;n++){var i=e[n],r=new o.LabelValuePair(this.options.locale);r.parse(i),t.push(r)}return t},t.prototype.getRendering=function(e){for(var t=this.getRenderings(),n=0;n<t.length;n++){var i=t[n];if(i.getFormat()===e)return i}return null},t.prototype.getRenderings=function(){var e,t=[];if(!(e=this.__jsonld?this.__jsonld.rendering:this.rendering))return t;Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var i=e[n];t.push(new o.Rendering(i,this.options))}return t},t.prototype.getService=function(e){return o.Utils.getService(this,e)},t.prototype.getServices=function(){return o.Utils.getServices(this)},t.prototype.getThumbnail=function(){var e=this.getProperty("thumbnail");return Array.isArray(e)&&(e=e[0]),e?new o.Thumbnail(e,this.options):null},t.prototype.isAnnotation=function(){return this.getIIIFResourceType()===a.IIIFResourceType.ANNOTATION},t.prototype.isCanvas=function(){return this.getIIIFResourceType()===a.IIIFResourceType.CANVAS},t.prototype.isCollection=function(){return this.getIIIFResourceType()===a.IIIFResourceType.COLLECTION},t.prototype.isManifest=function(){return this.getIIIFResourceType()===a.IIIFResourceType.MANIFEST},t.prototype.isRange=function(){return this.getIIIFResourceType()===a.IIIFResourceType.RANGE},t.prototype.isSequence=function(){return this.getIIIFResourceType()===a.IIIFResourceType.SEQUENCE},t}(o.JSONLDResource);t.ManifestResource=s},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(e){function t(t,n){return e.call(this,t,n)||this}return r(t,e),t.prototype.getFormat=function(){var e=this.getProperty("format");return e?e.toLowerCase():null},t.prototype.getResources=function(){var e=[];if(!this.__jsonld.resources)return e;for(var t=0;t<this.__jsonld.resources.length;t++){var n=this.__jsonld.resources[t],i=new o.Annotation(n,this.options);e.push(i)}return e},t.prototype.getType=function(){var e=this.getProperty("type");return e?o.Utils.normaliseType(e):null},t.prototype.getWidth=function(){return this.getProperty("width")},t.prototype.getHeight=function(){return this.getProperty("height")},t.prototype.getMaxWidth=function(){return this.getProperty("maxWidth")},t.prototype.getMaxHeight=function(){return this.getProperty("maxHeight")?null:this.getMaxWidth()},t}(o.ManifestResource);t.Resource=a},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(1),s=function(e){function t(t,n){var i=e.call(this,t,n)||this;i.index=-1,i.isLoaded=!1;var r={defaultLabel:"-",locale:"en-GB",resource:i,pessimisticAccessControl:!1};return i.options=Object.assign(r,n),i}return r(t,e),t.prototype.getAttribution=function(){var e=this.getProperty("attribution");return e?o.LanguageMap.parse(e,this.options.locale):[]},t.prototype.getDescription=function(){var e=this.getProperty("description");return e?o.LanguageMap.parse(e,this.options.locale):[]},t.prototype.getIIIFResourceType=function(){return o.Utils.normaliseType(this.getProperty("type"))},t.prototype.getLogo=function(){var e=this.getProperty("logo");return e?"string"==typeof e?e:(Array.isArray(e)&&e.length&&(e=e[0]),e["@id"]||e.id):null},t.prototype.getLicense=function(){return o.Utils.getLocalisedValue(this.getProperty("license"),this.options.locale)},t.prototype.getNavDate=function(){return new Date(this.getProperty("navDate"))},t.prototype.getRelated=function(){return this.getProperty("related")},t.prototype.getSeeAlso=function(){return this.getProperty("seeAlso")},t.prototype.getTrackingLabel=function(){var e=this.getService(a.ServiceProfile.TRACKING_EXTENSIONS);return e?e.getProperty("trackingLabel"):""},t.prototype.getDefaultTree=function(){return this.defaultTree=new o.TreeNode("root"),this.defaultTree.data=this,this.defaultTree},t.prototype.getRequiredStatement=function(){var e=null,t=this.getProperty("requiredStatement");if(t)(e=new o.LabelValuePair(this.options.locale)).parse(t);else{var n=this.getAttribution();n&&((e=new o.LabelValuePair(this.options.locale)).value=n)}return e},t.prototype.isCollection=function(){return this.getIIIFResourceType()===a.IIIFResourceType.COLLECTION},t.prototype.isManifest=function(){return this.getIIIFResourceType()===a.IIIFResourceType.MANIFEST},t.prototype.load=function(){var e=this;return new Promise((function(t){if(e.isLoaded)t(e);else{var n=e.options;n.navDate=e.getNavDate();var i=e.__jsonld.id;i||(i=e.__jsonld["@id"]),o.Utils.loadManifest(i).then((function(i){e.parentLabel=o.LanguageMap.getValue(e.getLabel(),n.locale);var r=o.Deserialiser.parse(i,n);(e=Object.assign(e,r)).index=n.index,t(e)}))}}))},t}(o.ManifestResource);t.IIIFResource=s},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(e){function t(t,n){return e.call(this,t,n)||this}return r(t,e),t.prototype.getBody=function(){var e=[],t=this.getProperty("body");if(t)if(Array.isArray(t))for(var n=0;n<t.length;n++)if((a=t[n]).items)for(var i=0;i<a.items.length;i++){var r=a.items[i];e.push(new o.AnnotationBody(r,this.options))}else e.push(new o.AnnotationBody(a,this.options));else if(t.items)for(n=0;n<t.items.length;n++){var a=t.items[n];e.push(new o.AnnotationBody(a,this.options))}else e.push(new o.AnnotationBody(t,this.options));return e},t.prototype.getMotivation=function(){return this.getProperty("motivation")||null},t.prototype.getOn=function(){return this.getProperty("on")},t.prototype.getTarget=function(){return this.getProperty("target")},t.prototype.getResource=function(){return new o.Resource(this.getProperty("resource"),this.options)},t}(o.ManifestResource);t.Annotation=a},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(e){function t(t,n){return e.call(this,t,n)||this}return r(t,e),t.prototype.getFormat=function(){var e=this.getProperty("format");return e?o.Utils.getMediaType(e):null},t.prototype.getType=function(){return this.getProperty("type")?o.Utils.normaliseType(this.getProperty("type")):null},t.prototype.getWidth=function(){return this.getProperty("width")},t.prototype.getHeight=function(){return this.getProperty("height")},t}(o.ManifestResource);t.AnnotationBody=a},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(e){function t(t,n,i){var r=e.call(this,n)||this;return r.label=t,r.options=i,r}return r(t,e),t.prototype.getIIIFResourceType=function(){return o.Utils.normaliseType(this.getProperty("type"))},t.prototype.getLabel=function(){return this.label},t.prototype.getResources=function(){var e=this;return this.getProperty("resources").map((function(t){return new o.Annotation(t,e.options)}))},t.prototype.load=function(){var e=this;return new Promise((function(t,n){if(e.isLoaded)t(e);else{var i=e.__jsonld.id;i||(i=e.__jsonld["@id"]),o.Utils.loadManifest(i).then((function(n){e.__jsonld=n,e.context=e.getProperty("context"),e.id=e.getProperty("id"),e.isLoaded=!0,t(e)})).catch(n)}}))},t}(o.JSONLDResource);t.AnnotationList=a},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n){return e.call(this,t,n)||this}return r(t,e),t.prototype.getItems=function(){return this.getProperty("items")},t}(n(0).ManifestResource);t.AnnotationPage=o},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(e){function t(t,n){return e.call(this,t,n)||this}return r(t,e),t.prototype.getCanonicalImageUri=function(e){var t,n=null,i="default",r=e;if(this.externalResource&&this.externalResource.data&&this.externalResource.data["@id"])n=this.externalResource.data["@id"],r||(r=this.externalResource.data.width),this.externalResource.data["@context"]&&(this.externalResource.data["@context"].indexOf("/1.0/context.json")>-1||this.externalResource.data["@context"].indexOf("/1.1/context.json")>-1||this.externalResource.data["@context"].indexOf("/1/context.json")>-1)&&(i="native");else{var a=this.getImages();if(a&&a.length){var s=a[0].getResource(),c=s.getServices();if(r||(r=s.getWidth()),c.length){var u=c[0];n=u.id,i=o.Utils.getImageQuality(u.getProfile())}else if(r===s.getWidth())return s.id}if(!n){var l=this.getProperty("thumbnail");if(l){if("string"==typeof l)return l;if(l["@id"])return l["@id"];if(l.length)return l[0].id}}}return t=r+",",n&&n.endsWith("/")&&(n=n.substr(0,n.length-1)),[n,"full",t,0,i+".jpg"].join("/")},t.prototype.getMaxDimensions=function(){var e,t=null;return this.externalResource&&this.externalResource.data&&this.externalResource.data.profile&&(e=this.externalResource.data.profile,Array.isArray(e)&&(e=e.filter((function(e){return e.maxWidth}))[0])&&(t=new o.Size(e.maxWidth,e.maxHeight?e.maxHeight:e.maxWidth))),t},t.prototype.getContent=function(){var e=[],t=this.__jsonld.items||this.__jsonld.content;if(!t)return e;var n=null;if(t.length&&(n=new o.AnnotationPage(t[0],this.options)),!n)return e;for(var i=n.getItems(),r=0;r<i.length;r++){var a=i[r],s=new o.Annotation(a,this.options);e.push(s)}return e},t.prototype.getDuration=function(){return this.getProperty("duration")},t.prototype.getImages=function(){var e=[];if(!this.__jsonld.images)return e;for(var t=0;t<this.__jsonld.images.length;t++){var n=this.__jsonld.images[t],i=new o.Annotation(n,this.options);e.push(i)}return e},t.prototype.getIndex=function(){return this.getProperty("index")},t.prototype.getOtherContent=function(){var e=this,t=(Array.isArray(this.getProperty("otherContent"))?this.getProperty("otherContent"):[this.getProperty("otherContent")]).filter((function(e){return e&&"string"==typeof(t=e["@type"])&&t.toLowerCase()==t.toLowerCase();var t})).map((function(t,n){return new o.AnnotationList(t.label||"Annotation list "+n,t,e.options)})).map((function(e){return e.load()}));return Promise.all(t)},t.prototype.getWidth=function(){return this.getProperty("width")},t.prototype.getHeight=function(){return this.getProperty("height")},t}(o.Resource);t.Canvas=a},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=n(0),s=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.items=[],i._collections=null,i._manifests=null,t.__collection=i,i}return r(t,e),t.prototype.getCollections=function(){return this._collections?this._collections:this._collections=this.items.filter((function(e){return e.isCollection()}))},t.prototype.getManifests=function(){return this._manifests?this._manifests:this._manifests=this.items.filter((function(e){return e.isManifest()}))},t.prototype.getCollectionByIndex=function(e){for(var t,n=this.getCollections(),i=0;i<n.length;i++){var r=n[i];r.index===e&&(t=r)}if(t)return t.options.index=e,t.load();throw new Error("Collection index not found")},t.prototype.getManifestByIndex=function(e){for(var t,n=this.getManifests(),i=0;i<n.length;i++){var r=n[i];r.index===e&&(t=r)}if(t)return t.options.index=e,t.load();throw new Error("Manifest index not found")},t.prototype.getTotalCollections=function(){return this.getCollections().length},t.prototype.getTotalManifests=function(){return this.getManifests().length},t.prototype.getTotalItems=function(){return this.items.length},t.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?this.getProperty("viewingDirection"):o.ViewingDirection.LEFT_TO_RIGHT},t.prototype.getDefaultTree=function(){return e.prototype.getDefaultTree.call(this),this.defaultTree.data.type=a.Utils.normaliseType(a.TreeNodeType.COLLECTION),this._parseManifests(this),this._parseCollections(this),a.Utils.generateTreeNodeIds(this.defaultTree),this.defaultTree},t.prototype._parseManifests=function(e){if(e.getManifests()&&e.getManifests().length)for(var t=0;t<e.getManifests().length;t++){var n=e.getManifests()[t],i=n.getDefaultTree();i.label=n.parentLabel||a.LanguageMap.getValue(n.getLabel(),this.options.locale)||"manifest "+(t+1),i.navDate=n.getNavDate(),i.data.id=n.id,i.data.type=a.Utils.normaliseType(a.TreeNodeType.MANIFEST),e.defaultTree.addNode(i)}},t.prototype._parseCollections=function(e){if(e.getCollections()&&e.getCollections().length)for(var t=0;t<e.getCollections().length;t++){var n=e.getCollections()[t],i=n.getDefaultTree();i.label=n.parentLabel||a.LanguageMap.getValue(n.getLabel(),this.options.locale)||"collection "+(t+1),i.navDate=n.getNavDate(),i.data.id=n.id,i.data.type=a.Utils.normaliseType(a.TreeNodeType.COLLECTION),e.defaultTree.addNode(i)}},t}(a.IIIFResource);t.Collection=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){this.start=e,this.end=t}return e.prototype.getLength=function(){return this.end-this.start},e}();t.Duration=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=function(){function e(e){this.defaultLocale=e}return e.prototype.parse=function(e){this.resource=e,this.label=i.LanguageMap.parse(this.resource.label,this.defaultLocale),this.value=i.LanguageMap.parse(this.resource.value,this.defaultLocale)},e.prototype.getLabel=function(){return this.label?i.LanguageMap.getValue(this.label,this.defaultLocale):null},e.prototype.setLabel=function(e){var t=this;if(this.label&&this.label.length){var n=this.label.filter((function(e){return e.locale===t.defaultLocale||e.locale===i.Utils.getInexactLocale(t.defaultLocale)}))[0];n&&(n.value=e)}},e.prototype.getValue=function(){if(this.value){var e=this.defaultLocale;return this.label&&this.label.length&&this.label[0].locale&&(e=this.label[0].locale),i.LanguageMap.getValue(this.value,e)}return null},e.prototype.setValue=function(e){var t=this;if(this.value&&this.value.length){var n=this.value.filter((function(e){return e.locale===t.defaultLocale||e.locale===i.Utils.getInexactLocale(t.defaultLocale)}))[0];n&&(n.value=e)}},e}();t.LabelValuePair=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Language=function(e,t){Array.isArray(e)?1===e.length?this.value=e[0]:this.value=e.join("<br/>"):this.value=e,this.locale=t}},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.parse=function(e,t){var n,i=[];if(!e)return i;if(Array.isArray(e))for(var r=0;r<e.length;r++){var a=e[r];n="string"==typeof a?new o.Language(a,t):new o.Language(a["@value"],a["@language"]||t),i.push(n)}else{if("string"==typeof e)return n=new o.Language(e,t),i.push(n),i;e["@value"]?(n=new o.Language(e["@value"],e["@language"]||t),i.push(n)):Object.keys(e).forEach((function(t){if(!e[t].length)throw new Error("language must have a value");n=new o.Language(e[t],t),i.push(n)}))}return i},t.getValue=function(e,t){if(e.length){if(t){var n=e.filter((function(e){return e.locale===t||o.Utils.getInexactLocale(e.locale)===o.Utils.getInexactLocale(t)}))[0];if(n)return n.value}return e[0].value}return null},t}(Array);t.LanguageMap=a},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=n(0),s=function(e){function t(t,n){var i=e.call(this,t,n)||this;if(i.index=0,i._allRanges=null,i.items=[],i._topRanges=[],i.__jsonld.structures&&i.__jsonld.structures.length)for(var r=i._getTopRanges(),o=0;o<r.length;o++){var a=r[o];i._parseRanges(a,String(o))}return i}return r(t,e),t.prototype.getPosterCanvas=function(){var e=this.getProperty("posterCanvas");return e&&(e=new a.Canvas(e,this.options)),e},t.prototype.getBehavior=function(){var e=this.getProperty("behavior");return Array.isArray(e)&&(e=e[0]),e||null},t.prototype.getDefaultTree=function(){if(e.prototype.getDefaultTree.call(this),this.defaultTree.data.type=a.Utils.normaliseType(a.TreeNodeType.MANIFEST),!this.isLoaded)return this.defaultTree;var t=this.getTopRanges();return t.length&&t[0].getTree(this.defaultTree),a.Utils.generateTreeNodeIds(this.defaultTree),this.defaultTree},t.prototype._getTopRanges=function(){var e=[];if(this.__jsonld.structures&&this.__jsonld.structures.length){for(var t=0;t<this.__jsonld.structures.length;t++){var n=this.__jsonld.structures[t];n.viewingHint===o.ViewingHint.TOP&&e.push(n)}if(!e.length){var i={};i.ranges=this.__jsonld.structures,e.push(i)}}return e},t.prototype.getTopRanges=function(){return this._topRanges},t.prototype._getRangeById=function(e){if(this.__jsonld.structures&&this.__jsonld.structures.length)for(var t=0;t<this.__jsonld.structures.length;t++){var n=this.__jsonld.structures[t];if(n["@id"]===e||n.id===e)return n}return null},t.prototype._parseRanges=function(e,t,n){var i,r=null;if("string"==typeof e&&(r=e,e=this._getRangeById(r)),e){(i=new a.Range(e,this.options)).parentRange=n,i.path=t,n?n.items.push(i):this._topRanges.push(i);var o=e.items||e.members;if(o)for(var s=0;s<o.length;s++){var c=o[s];if(c["@type"]&&"sc:range"===c["@type"].toLowerCase()||c.type&&"range"===c.type.toLowerCase())this._parseRanges(c,t+"/"+s,i);else if(c["@type"]&&"sc:canvas"===c["@type"].toLowerCase()||c.type&&"canvas"===c.type.toLowerCase()){i.canvases||(i.canvases=[]);var u=c.id||c["@id"];i.canvases.push(u)}}else if(e.ranges)for(s=0;s<e.ranges.length;s++)this._parseRanges(e.ranges[s],t+"/"+s,i)}else console.warn("Range:",r,"does not exist")},t.prototype.getAllRanges=function(){if(null!=this._allRanges)return this._allRanges;this._allRanges=[];for(var e=this.getTopRanges(),t=function(t){var i=e[t];i.id&&n._allRanges.push(i);var r=function(e,t){e.add(t);var n=t.getRanges();return n.length?n.reduce(r,e):e},o=Array.from(i.getRanges().reduce(r,new Set));n._allRanges=n._allRanges.concat(o)},n=this,i=0;i<e.length;i++)t(i);return this._allRanges},t.prototype.getRangeById=function(e){for(var t=this.getAllRanges(),n=0;n<t.length;n++){var i=t[n];if(i.id===e)return i}return null},t.prototype.getRangeByPath=function(e){for(var t=this.getAllRanges(),n=0;n<t.length;n++){var i=t[n];if(i.path===e)return i}return null},t.prototype.getSequences=function(){if(this.items.length)return this.items;var e=this.__jsonld.mediaSequences||this.__jsonld.sequences;if(e)for(var t=0;t<e.length;t++){var n=e[t],i=new a.Sequence(n,this.options);this.items.push(i)}else this.__jsonld.items&&(i=new a.Sequence(this.__jsonld.items,this.options),this.items.push(i));return this.items},t.prototype.getSequenceByIndex=function(e){return this.getSequences()[e]},t.prototype.getTotalSequences=function(){return this.getSequences().length},t.prototype.getManifestType=function(){var e=this.getService(o.ServiceProfile.UI_EXTENSIONS);return e?e.getProperty("manifestType"):a.ManifestType.EMPTY},t.prototype.isMultiSequence=function(){return this.getTotalSequences()>1},t.prototype.isPagingEnabled=function(){var e=this.getViewingHint();if(e)return e===o.ViewingHint.PAGED;var t=this.getBehavior();return!!t&&t===o.Behavior.PAGED},t.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")},t.prototype.getViewingHint=function(){return this.getProperty("viewingHint")},t}(a.IIIFResource);t.Manifest=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.EMPTY="",e.MANUSCRIPT="manuscript",e.MONOGRAPH="monograph"}(t.ManifestType||(t.ManifestType={}))},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(1),s=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i._ranges=null,i.canvases=null,i.items=[],i}return r(t,e),t.prototype.getCanvasIds=function(){return this.__jsonld.canvases?this.__jsonld.canvases:this.canvases?this.canvases:[]},t.prototype.getDuration=function(){var e,t;if(this.canvases&&this.canvases.length)for(var n=0;n<this.canvases.length;n++){var i=this.canvases[n],r=o.Utils.getTemporalComponent(i);r&&r.length>1&&(0===n&&(e=Number(r[0])),n===this.canvases.length-1&&(t=Number(r[1])))}else{var a=this.getRanges();for(n=0;n<a.length;n++){var s=a[n].getDuration();s&&(0===n&&(e=s.start),n===a.length-1&&(t=s.end))}}if(void 0!==e&&void 0!==t)return new o.Duration(e,t)},t.prototype.getRanges=function(){return this._ranges?this._ranges:this._ranges=this.items.filter((function(e){return e.isRange()}))},t.prototype.getBehavior=function(){var e=this.getProperty("behavior");return Array.isArray(e)&&(e=e[0]),e||null},t.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")},t.prototype.getViewingHint=function(){return this.getProperty("viewingHint")},t.prototype.getTree=function(e){e.data=this,this.treeNode=e;var t=this.getRanges();if(t&&t.length)for(var n=0;n<t.length;n++){var i=t[n],r=new o.TreeNode;e.addNode(r),this._parseTreeNode(r,i)}return o.Utils.generateTreeNodeIds(e),e},t.prototype.spansTime=function(e){var t=this.getDuration();return!!(t&&e>=t.start&&e<=t.end)},t.prototype._parseTreeNode=function(e,t){e.label=o.LanguageMap.getValue(t.getLabel(),this.options.locale),e.data=t,e.data.type=o.Utils.normaliseType(o.TreeNodeType.RANGE),t.treeNode=e;var n=t.getRanges();if(n&&n.length)for(var i=0;i<n.length;i++){var r=n[i];if(r.getBehavior()!==a.Behavior.NO_NAV){var s=new o.TreeNode;e.addNode(s),this._parseTreeNode(s,r)}}},t}(o.ManifestResource);t.Range=s},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n){return e.call(this,t,n)||this}return r(t,e),t.prototype.getFormat=function(){return this.getProperty("format")},t}(n(0).ManifestResource);t.Rendering=o},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=n(0),s=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.items=[],i._thumbnails=null,i}return r(t,e),t.prototype.getCanvases=function(){if(this.items.length)return this.items;var e=this.__jsonld.canvases||this.__jsonld.elements;if(e)for(var t=0;t<e.length;t++){var n=e[t];(i=new a.Canvas(n,this.options)).index=t,this.items.push(i)}else if(this.__jsonld)for(t=0;t<this.__jsonld.length;t++){var i;n=this.__jsonld[t],(i=new a.Canvas(n,this.options)).index=t,this.items.push(i)}return this.items},t.prototype.getCanvasById=function(e){for(var t=0;t<this.getTotalCanvases();t++){var n=this.getCanvasByIndex(t),i=a.Utils.normaliseUrl(n.id);if(a.Utils.normaliseUrl(e)===i)return n}return null},t.prototype.getCanvasByIndex=function(e){return this.getCanvases()[e]},t.prototype.getCanvasIndexById=function(e){for(var t=0;t<this.getTotalCanvases();t++)if(this.getCanvasByIndex(t).id===e)return t;return null},t.prototype.getCanvasIndexByLabel=function(e,t){e=e.trim(),isNaN(e)||(e=parseInt(e,10).toString(),t&&(e+="r"));for(var n,i,r,o=/(\d*)\D+(\d*)/,s=0;s<this.getTotalCanvases();s++){var c=this.getCanvasByIndex(s);if(a.LanguageMap.getValue(c.getLabel(),this.options.locale)===e)return s;if((n=o.exec(e))&&(i=n[1],(r=n[2])&&new RegExp("^"+i+"\\D+"+r+"$").test(c.getLabel().toString())))return s}return-1},t.prototype.getLastCanvasLabel=function(e){for(var t=this.getTotalCanvases()-1;t>=0;t--){var n=this.getCanvasByIndex(t),i=a.LanguageMap.getValue(n.getLabel(),this.options.locale);if(e){if(/^[a-zA-Z0-9]*$/.test(i))return i}else if(i)return i}return this.options.defaultLabel},t.prototype.getLastPageIndex=function(){return this.getTotalCanvases()-1},t.prototype.getNextPageIndex=function(e,t){var n;if(t){var i=this.getPagedIndices(e),r=this.getViewingDirection();n=r&&r===o.ViewingDirection.RIGHT_TO_LEFT?i[0]+1:i[i.length-1]+1}else n=e+1;return n>this.getLastPageIndex()?-1:n},t.prototype.getPagedIndices=function(e,t){var n=[];if(t){n=this.isFirstCanvas(e)||this.isLastCanvas(e)?[e]:e%2?[e,e+1]:[e-1,e];var i=this.getViewingDirection();i&&i===o.ViewingDirection.RIGHT_TO_LEFT&&(n=n.reverse())}else n.push(e);return n},t.prototype.getPrevPageIndex=function(e,t){var n;if(t){var i=this.getPagedIndices(e),r=this.getViewingDirection();n=r&&r===o.ViewingDirection.RIGHT_TO_LEFT?i[i.length-1]-1:i[0]-1}else n=e-1;return n},t.prototype.getStartCanvasIndex=function(){var e=this.getStartCanvas();if(e)for(var t=0;t<this.getTotalCanvases();t++)if(this.getCanvasByIndex(t).id===e)return t;return 0},t.prototype.getThumbs=function(e,t){for(var n=[],i=this.getTotalCanvases(),r=0;r<i;r++){var o=this.getCanvasByIndex(r),s=new a.Thumb(e,o);n.push(s)}return n},t.prototype.getThumbnails=function(){if(null!=this._thumbnails)return this._thumbnails;this._thumbnails=[];for(var e=this.getCanvases(),t=0;t<e.length;t++){var n=e[t].getThumbnail();n&&this._thumbnails.push(n)}return this._thumbnails},t.prototype.getStartCanvas=function(){return this.getProperty("startCanvas")},t.prototype.getTotalCanvases=function(){return this.getCanvases().length},t.prototype.getViewingDirection=function(){return this.getProperty("viewingDirection")?this.getProperty("viewingDirection"):this.options.resource.getViewingDirection?this.options.resource.getViewingDirection():null},t.prototype.getViewingHint=function(){return this.getProperty("viewingHint")},t.prototype.isCanvasIndexOutOfRange=function(e){return e>this.getTotalCanvases()-1},t.prototype.isFirstCanvas=function(e){return 0===e},t.prototype.isLastCanvas=function(e){return e===this.getTotalCanvases()-1},t.prototype.isMultiCanvas=function(){return this.getTotalCanvases()>1},t.prototype.isPagingEnabled=function(){var e=this.getViewingHint();return!!e&&e===o.ViewingHint.PAGED},t.prototype.isTotalCanvasesEven=function(){return this.getTotalCanvases()%2==0},t}(a.ManifestResource);t.Sequence=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=function(){function e(){}return e.parse=function(e,t){return"string"==typeof e&&(e=JSON.parse(e)),this.parseJson(e,t)},e.parseJson=function(e,t){var n;if(t&&t.navDate&&!isNaN(t.navDate.getTime())&&(e.navDate=t.navDate.toString()),e["@type"])switch(e["@type"]){case"sc:Collection":n=this.parseCollection(e,t);break;case"sc:Manifest":n=this.parseManifest(e,t);break;default:return null}else switch(e.type){case"Collection":n=this.parseCollection(e,t);break;case"Manifest":n=this.parseManifest(e,t);break;default:return null}return n.isLoaded=!0,n},e.parseCollection=function(e,t){var n=new i.Collection(e,t);return t?(n.index=t.index||0,t.resource&&(n.parentCollection=t.resource.parentCollection)):n.index=0,this.parseCollections(n,t),this.parseManifests(n,t),this.parseItems(n,t),n},e.parseCollections=function(e,t){var n;if(e.__jsonld.collections?n=e.__jsonld.collections:e.__jsonld.items&&(n=e.__jsonld.items.filter((function(e){return"collection"===e.type.toLowerCase()}))),n)for(var i=0;i<n.length;i++){t&&(t.index=i);var r=this.parseCollection(n[i],t);r.index=i,r.parentCollection=e,e.items.push(r)}},e.parseManifest=function(e,t){return new i.Manifest(e,t)},e.parseManifests=function(e,t){var n;if(e.__jsonld.manifests?n=e.__jsonld.manifests:e.__jsonld.items&&(n=e.__jsonld.items.filter((function(e){return"manifest"===e.type.toLowerCase()}))),n)for(var i=0;i<n.length;i++){var r=this.parseManifest(n[i],t);r.index=i,r.parentCollection=e,e.items.push(r)}},e.parseItem=function(e,t){if(e["@type"]){if("sc:manifest"===e["@type"].toLowerCase())return this.parseManifest(e,t);if("sc:collection"===e["@type"].toLowerCase())return this.parseCollection(e,t)}else if(e.type){if("manifest"===e.type.toLowerCase())return this.parseManifest(e,t);if("collection"===e.type.toLowerCase())return this.parseCollection(e,t)}return null},e.parseItems=function(e,t){var n=e.__jsonld.members||e.__jsonld.items;if(n)for(var i=function(i){t&&(t.index=i);var o=r.parseItem(n[i],t);return o?e.items.filter((function(e){return e.id===o.id}))[0]?"continue":(o.index=i,o.parentCollection=e,void e.items.push(o)):{value:void 0}},r=this,o=0;o<n.length;o++){var a=i(o);if("object"==typeof a)return a.value}},e}();t.Deserialiser=r},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=function(e){function t(t,n){return e.call(this,t,n)||this}return r(t,e),t.prototype.getProfile=function(){var e=this.getProperty("profile");return e||(e=this.getProperty("dcterms:conformsTo")),Array.isArray(e)?e[0]:e},t.prototype.getConfirmLabel=function(){return o.Utils.getLocalisedValue(this.getProperty("confirmLabel"),this.options.locale)},t.prototype.getDescription=function(){return o.Utils.getLocalisedValue(this.getProperty("description"),this.options.locale)},t.prototype.getFailureDescription=function(){return o.Utils.getLocalisedValue(this.getProperty("failureDescription"),this.options.locale)},t.prototype.getFailureHeader=function(){return o.Utils.getLocalisedValue(this.getProperty("failureHeader"),this.options.locale)},t.prototype.getHeader=function(){return o.Utils.getLocalisedValue(this.getProperty("header"),this.options.locale)},t.prototype.getServiceLabel=function(){return o.Utils.getLocalisedValue(this.getProperty("label"),this.options.locale)},t.prototype.getInfoUri=function(){var e=this.id;return e.endsWith("/")||(e+="/"),e+"info.json"},t}(o.ManifestResource);t.Service=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Size=function(e,t){this.width=e,this.height=t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.AUTHORIZATION_FAILED=1]="AUTHORIZATION_FAILED",e[e.FORBIDDEN=2]="FORBIDDEN",e[e.INTERNAL_SERVER_ERROR=3]="INTERNAL_SERVER_ERROR",e[e.RESTRICTED=4]="RESTRICTED"}(t.StatusCode||(t.StatusCode={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.Thumb=function(e,t){this.data=t,this.index=t.index,this.width=e;var n=t.getHeight()/t.getWidth();this.height=n?Math.floor(this.width*n):e,this.uri=t.getCanonicalImageUri(e),this.label=i.LanguageMap.getValue(t.getLabel())}},function(e,t,n){"use strict";var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t,n){return e.call(this,t,n)||this}return r(t,e),t}(n(0).Resource);t.Thumbnail=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r=function(){function e(e,t){this.label=e,this.data=t||{},this.nodes=[]}return e.prototype.addNode=function(e){this.nodes.push(e),e.parentNode=this},e.prototype.isCollection=function(){return this.data.type===i.Utils.normaliseType(i.TreeNodeType.COLLECTION)},e.prototype.isManifest=function(){return this.data.type===i.Utils.normaliseType(i.TreeNodeType.MANIFEST)},e.prototype.isRange=function(){return this.data.type===i.Utils.normaliseType(i.TreeNodeType.RANGE)},e}();t.TreeNode=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.COLLECTION="collection",e.MANIFEST="manifest",e.RANGE="range"}(t.TreeNodeType||(t.TreeNodeType={}))},function(e,t,n){window,e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONTINUE=100,t.SWITCHING_PROTOCOLS=101,t.PROCESSING=102,t.OK=200,t.CREATED=201,t.ACCEPTED=202,t.NON_AUTHORITATIVE_INFORMATION=203,t.NO_CONTENT=204,t.RESET_CONTENT=205,t.PARTIAL_CONTENT=206,t.MULTI_STATUS=207,t.MULTIPLE_CHOICES=300,t.MOVED_PERMANENTLY=301,t.MOVED_TEMPORARILY=302,t.SEE_OTHER=303,t.NOT_MODIFIED=304,t.USE_PROXY=305,t.TEMPORARY_REDIRECT=307,t.BAD_REQUEST=400,t.UNAUTHORIZED=401,t.PAYMENT_REQUIRED=402,t.FORBIDDEN=403,t.NOT_FOUND=404,t.METHOD_NOT_ALLOWED=405,t.NOT_ACCEPTABLE=406,t.PROXY_AUTHENTICATION_REQUIRED=407,t.REQUEST_TIME_OUT=408,t.CONFLICT=409,t.GONE=410,t.LENGTH_REQUIRED=411,t.PRECONDITION_FAILED=412,t.REQUEST_ENTITY_TOO_LARGE=413,t.REQUEST_URI_TOO_LARGE=414,t.UNSUPPORTED_MEDIA_TYPE=415,t.REQUESTED_RANGE_NOT_SATISFIABLE=416,t.EXPECTATION_FAILED=417,t.IM_A_TEAPOT=418,t.UNPROCESSABLE_ENTITY=422,t.LOCKED=423,t.FAILED_DEPENDENCY=424,t.UNORDERED_COLLECTION=425,t.UPGRADE_REQUIRED=426,t.PRECONDITION_REQUIRED=428,t.TOO_MANY_REQUESTS=429,t.REQUEST_HEADER_FIELDS_TOO_LARGE=431,t.INTERNAL_SERVER_ERROR=500,t.NOT_IMPLEMENTED=501,t.BAD_GATEWAY=502,t.SERVICE_UNAVAILABLE=503,t.GATEWAY_TIME_OUT=504,t.HTTP_VERSION_NOT_SUPPORTED=505,t.VARIANT_ALSO_NEGOTIATES=506,t.INSUFFICIENT_STORAGE=507,t.BANDWIDTH_LIMIT_EXCEEDED=509,t.NOT_EXTENDED=510,t.NETWORK_AUTHENTICATION_REQUIRED=511}])},function(e,t,n){e.exports=window.fetch||(window.fetch=n(3).default||n(3))}])},function(e,t,n){window,e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONTINUE=100,t.SWITCHING_PROTOCOLS=101,t.PROCESSING=102,t.OK=200,t.CREATED=201,t.ACCEPTED=202,t.NON_AUTHORITATIVE_INFORMATION=203,t.NO_CONTENT=204,t.RESET_CONTENT=205,t.PARTIAL_CONTENT=206,t.MULTI_STATUS=207,t.MULTIPLE_CHOICES=300,t.MOVED_PERMANENTLY=301,t.MOVED_TEMPORARILY=302,t.SEE_OTHER=303,t.NOT_MODIFIED=304,t.USE_PROXY=305,t.TEMPORARY_REDIRECT=307,t.BAD_REQUEST=400,t.UNAUTHORIZED=401,t.PAYMENT_REQUIRED=402,t.FORBIDDEN=403,t.NOT_FOUND=404,t.METHOD_NOT_ALLOWED=405,t.NOT_ACCEPTABLE=406,t.PROXY_AUTHENTICATION_REQUIRED=407,t.REQUEST_TIME_OUT=408,t.CONFLICT=409,t.GONE=410,t.LENGTH_REQUIRED=411,t.PRECONDITION_FAILED=412,t.REQUEST_ENTITY_TOO_LARGE=413,t.REQUEST_URI_TOO_LARGE=414,t.UNSUPPORTED_MEDIA_TYPE=415,t.REQUESTED_RANGE_NOT_SATISFIABLE=416,t.EXPECTATION_FAILED=417,t.IM_A_TEAPOT=418,t.UNPROCESSABLE_ENTITY=422,t.LOCKED=423,t.FAILED_DEPENDENCY=424,t.UNORDERED_COLLECTION=425,t.UPGRADE_REQUIRED=426,t.PRECONDITION_REQUIRED=428,t.TOO_MANY_REQUESTS=429,t.REQUEST_HEADER_FIELDS_TOO_LARGE=431,t.INTERNAL_SERVER_ERROR=500,t.NOT_IMPLEMENTED=501,t.BAD_GATEWAY=502,t.SERVICE_UNAVAILABLE=503,t.GATEWAY_TIME_OUT=504,t.HTTP_VERSION_NOT_SUPPORTED=505,t.VARIANT_ALSO_NEGOTIATES=506,t.INSUFFICIENT_STORAGE=507,t.BANDWIDTH_LIMIT_EXCEEDED=509,t.NOT_EXTENDED=510,t.NETWORK_AUTHENTICATION_REQUIRED=511}])},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return l})),n.d(t,"k",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"i",(function(){return p})),n.d(t,"j",(function(){return d})),n.d(t,"l",(function(){return g})),n.d(t,"m",(function(){return i})),n.d(t,"n",(function(){return E})),n.d(t,"o",(function(){return v}));var i,r=function(){function e(){}return e.waitFor=function(t,n,i,r,o,a){r||(r=200),o||(o=100),a||(a=0),(a+=1)>o?i&&i():t()?n():setTimeout((function(){e.waitFor(t,n,i,r,o,a)}),r)},e}(),o=function(){function e(){}return e.getBool=function(e,t){return null==e?t:e},e}(),a=(function(){function e(){}e.supportsCopy=function(){return document.queryCommandSupported&&document.queryCommandSupported("copy")},e.copy=function(t){t=e.convertBrToNewLine(t);var n=document.createElement("textarea");n.value=t,e.hideButKeepEnabled(n),document.body.appendChild(n),n.focus(),n.select(),document.execCommand("copy"),document.body.removeChild(n)},e.hideButKeepEnabled=function(e){e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="2em",e.style.height="2em",e.style.padding="0",e.style.border="none",e.style.outline="none",e.style.boxShadow="none",e.style.background="transparent"},e.convertBrToNewLine=function(e){return e=e.replace(/<br\s*[\/]?>/gi,"\n")}}(),function(){function e(){}e.float32ColorToARGB=function(e){return[(4278190080&e)>>>24,(16711680&e)>>>16,(65280&e)>>>8,255&e]},e._componentToHex=function(e){var t=e.toString(16);return 1==t.length?"0"+t:t},e.rgbToHexString=function(t){return e.coalesce(t),"#"+e._componentToHex(t[0])+e._componentToHex(t[1])+e._componentToHex(t[2])},e.argbToHexString=function(t){return"#"+e._componentToHex(t[0])+e._componentToHex(t[1])+e._componentToHex(t[2])+e._componentToHex(t[3])},e.coalesce=function(e){for(var t=1;t<e.length;t++)void 0===e[t]&&(e[t]=e[t-1])}}(),function(){function e(){}return e.getTimeStamp=function(){return(new Date).getTime()},e}()),s=(function(){function e(){}e.getPixelRatio=function(e){return(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)},e.isTouch=function(){return!!("ontouchstart"in window)||window.navigator.msMaxTouchPoints>0}}(),function(){function e(){}return e.isInIFrame=function(){try{return window.self!==window.top}catch(e){return!0}},e.supportsFullscreen=function(){var e=document.documentElement;return void 0!==(e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullScreen||e.msRequestFullscreen)},e.isHidden=function(){return!!e.getHiddenProp()},e.getHiddenProp=function(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null},e}()),c=(function(){function e(){}e.debounce=function(e,t){return t=t||100,function(){if(!e.debouncing){var n=Array.prototype.slice.apply(arguments);e.lastReturnVal=e.apply(window,n),e.debouncing=!0}return clearTimeout(e.debounceTimeout),e.debounceTimeout=setTimeout((function(){e.debouncing=!1}),t),e.lastReturnVal}}}(),function(){function e(){}return e.simplifyMimeType=function(e){switch(e){case"text/plain":return"txt";case"image/jpeg":return"jpg";case"application/msword":return"doc";case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return"docx";default:var t=e.split("/");return t[t.length-1]}},e}()),u=function(){function e(){}return e.getCharCode=function(e){return"number"==typeof e.which?e.which:e.keyCode},e}(),l=function(){function e(){}return e.normalise=function(e,t,n){return(e-t)/(n-t)},e.median=function(e){e.sort((function(e,t){return e-t}));var t=Math.floor(e.length/2);return e.length%2?e[t]:(e[t-1]+e[t])/2},e.clamp=function(e,t,n){return Math.min(Math.max(e,t),n)},e}(),f=function(e,t){this.width=e,this.height=t},h=function(){function e(){}return e.fitRect=function(e,t,n,i){var r,o=0,a=0;return t/e<i/n?(o=e*(r=n/e),a=t*r):(o=e*(r=i/t),a=t*r),new f(Math.floor(o),Math.floor(a))},e.hitRect=function(e,t,n,i,r,o){return r>e&&r<e+n&&o>t&&o<t+i},e}(),p=function(){function e(){}return e.numericalInput=function(e){return 46==e.keyCode||8==e.keyCode||9==e.keyCode||27==e.keyCode||65==e.keyCode&&!0===e.ctrlKey||e.keyCode>=35&&e.keyCode<=39||(!(e.shiftKey||(e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105))||(e.preventDefault(),!1))},e}(),d=function(){function e(){}return e.toPlainObject=function(e){e=Object(e);var t={};for(var n in e)t[n]=e[n];return t},e}(),g=function(){function e(){}return e.clear=function(e){switch(void 0===e&&(e=i.MEMORY),e){case i.MEMORY:this._memoryStorage={};break;case i.SESSION:sessionStorage.clear();break;case i.LOCAL:localStorage.clear()}},e.clearExpired=function(e){void 0===e&&(e=i.MEMORY);for(var t=this.getItems(e),n=0;n<t.length;n++){var r=t[n];this._isExpired(r)&&this.remove(r.key)}},e.get=function(e,t){void 0===t&&(t=i.MEMORY);var n=null;switch(t){case i.MEMORY:n=this._memoryStorage[e];break;case i.SESSION:n=sessionStorage.getItem(e);break;case i.LOCAL:n=localStorage.getItem(e)}if(!n)return null;var r=null;try{r=JSON.parse(n)}catch(e){return null}return r?this._isExpired(r)?null:(r.key=e,r):null},e._isExpired=function(e){return!((new Date).getTime()<e.expiresAt)},e.getItems=function(e){void 0===e&&(e=i.MEMORY);var t=[];switch(e){case i.MEMORY:for(var n=Object.keys(this._memoryStorage),r=0;r<n.length;r++){(a=this.get(n[r],i.MEMORY))&&t.push(a)}break;case i.SESSION:for(r=0;r<sessionStorage.length;r++){if(o=sessionStorage.key(r))(a=this.get(o,i.SESSION))&&t.push(a)}break;case i.LOCAL:for(r=0;r<localStorage.length;r++){var o,a;if(o=localStorage.key(r))(a=this.get(o,i.LOCAL))&&t.push(a)}}return t},e.remove=function(e,t){switch(void 0===t&&(t=i.MEMORY),t){case i.MEMORY:delete this._memoryStorage[e];break;case i.SESSION:sessionStorage.removeItem(e);break;case i.LOCAL:localStorage.removeItem(e)}},e.set=function(e,t,n,r){void 0===r&&(r=i.MEMORY);var o=1e3*n,a=new _;switch(a.value=t,a.expiresAt=(new Date).getTime()+o,r){case i.MEMORY:this._memoryStorage[e]=JSON.stringify(a);break;case i.SESSION:sessionStorage.setItem(e,JSON.stringify(a));break;case i.LOCAL:localStorage.setItem(e,JSON.stringify(a))}return a},e._memoryStorage={},e}(),_=function(){};!function(e){e.MEMORY="memory",e.SESSION="session",e.LOCAL="local"}(i||(i={}));var E=function(){function e(){}return e.ellipsis=function(e,t){if(e.length<=t)return e;var n=e.substr(0,t),i=n.lastIndexOf(" ");return-1!=i&&(n=n.substr(0,Math.min(n.length,i))),n+"&hellip;"},e.htmlDecode=function(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild.nodeValue},e.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=0;i<t.length;i++){var r=new RegExp("\\{"+i+"\\}","gm");e=e.replace(r,t[i])}return e},e.isAlphanumeric=function(e){return/^[a-zA-Z0-9]*$/.test(e)},e.toCssClass=function(e){return e.replace(/[^a-z0-9]/g,(function(e){var t=e.charCodeAt(0);return 32==t?"-":t>=65&&t<=90?"_"+e.toLowerCase():"__"+("000"+t.toString(16)).slice(-4)}))},e.toFileName=function(e){return e.replace(/[^a-z0-9]/gi,"_").toLowerCase()},e.utf8_to_b64=function(e){return window.btoa(unescape(encodeURIComponent(e)))},e}(),v=function(){function e(){}return e.getHashParameter=function(e,t){return t||(t=window.document),t&&t.location?this.getHashParameterFromString(e,t.location.hash):null},e.getHashParameterFromString=function(e,t){var n=new RegExp("#.*[?&]"+e+"=([^&]+)(&|$)").exec(t);return n?decodeURIComponent(n[1].replace(/\+/g," ")):null},e.setHashParameter=function(e,t,n){if(n||(n=window.document),n&&n.location){var i="#?"+this.updateURIKeyValuePair(n.location.hash.replace("#?",""),e,t),r=n.URL;-1!=r.indexOf("#")&&(r=r.substr(0,r.indexOf("#"))),n.location.replace(r+i)}},e.getQuerystringParameter=function(e,t){return t||(t=window),this.getQuerystringParameterFromString(e,t.location.search)},e.getQuerystringParameterFromString=function(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return n?decodeURIComponent(n[1].replace(/\+/g," ")):null},e.setQuerystringParameter=function(e,t,n){if(n||(n=window.document),n&&n.location){var i=this.updateURIKeyValuePair(n.location.hash.replace("#?",""),e,t);window.location.search=i}},e.updateURIKeyValuePair=function(e,t,n){t=encodeURIComponent(t),n=encodeURIComponent(n);var i=e.split("&");""==i[0]&&i.shift();for(var r,o=i.length;o--;)if((r=i[o].split("="))[0]==t){r[1]=n,i[o]=r.join("=");break}return o<0&&(i[i.length]=[t,n].join("=")),i.join("&")},e.getUrlParts=function(e){var t=document.createElement("a");return t.href=e,t},e.convertToRelativeUrl=function(e){var t=this.getUrlParts(e),n=t.pathname+t.searchWithin;return n.startsWith("/")||(n="/"+n),n},e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){function e(){}return e.ACCEPT_TERMS="acceptTerms",e.ANNOTATION_CANVAS_CHANGE="annotationCanvasChange",e.ANNOTATION_CHANGE="annotationChange",e.ANNOTATIONS_CLEARED="annotationsCleared",e.ANNOTATIONS_EMPTY="annotationsEmpty",e.ANNOTATIONS="annotations",e.BOOKMARK="bookmark",e.CANVAS_INDEX_CHANGE_FAILED="canvasIndexChangeFailed",e.CANVAS_INDEX_CHANGE="canvasIndexChange",e.CLEAR_ANNOTATIONS="clearAnnotations",e.CLICKTHROUGH="clickthrough",e.CLOSE_ACTIVE_DIALOGUE="closeActiveDialogue",e.CLOSE_LEFT_PANEL="closeLeftPanel",e.CLOSE_RIGHT_PANEL="closeRightPanel",e.COLLECTION_INDEX_CHANGE="collectionIndexChange",e.CREATE="create",e.CREATED="created",e.DOWN_ARROW="downArrow",e.DOWNLOAD="download",e.DROP="drop",e.END="end",e.ERROR="error",e.ESCAPE="escape",e.EXIT_FULLSCREEN="exitFullScreen",e.EXTERNAL_LINK_CLICKED="externalLinkClicked",e.EXTERNAL_RESOURCE_OPENED="externalResourceOpened",e.FEEDBACK="feedback",e.FIRST="first",e.FORBIDDEN="forbidden",e.GALLERY_DECREASE_SIZE="galleryDecreaseSize",e.GALLERY_INCREASE_SIZE="galleryIncreaseSize",e.GALLERY_THUMB_SELECTED="galleryThumbSelected",e.HIDE_AUTH_DIALOGUE="hideAuthDialogue",e.HIDE_CLICKTHROUGH_DIALOGUE="hideClickthroughDialogue",e.HIDE_DOWNLOAD_DIALOGUE="hideDownloadDialogue",e.HIDE_EMBED_DIALOGUE="hideEmbedDialogue",e.HIDE_EXTERNALCONTENT_DIALOGUE="hideExternalContentDialogue",e.HIDE_GENERIC_DIALOGUE="hideGenericDialogue",e.HIDE_HELP_DIALOGUE="hideHelpDialogue",e.HIDE_INFORMATION="hideInformation",e.HIDE_LOGIN_DIALOGUE="hideLoginDialogue",e.HIDE_MOREINFO_DIALOGUE="hideMoreInfoDialogue",e.HIDE_MULTISELECT_DIALOGUE="hideMultiSelectDialogue",e.HIDE_OVERLAY="hideOverlay",e.HIDE_RESTRICTED_DIALOGUE="hideRestrictedDialogue",e.HIDE_SETTINGS_DIALOGUE="hideSettingsDialogue",e.HIDE_SHARE_DIALOGUE="hideShareDialogue",e.HOME="home",e.LAST="last",e.LEFT_ARROW="leftArrow",e.LEFTPANEL_COLLAPSE_FULL_FINISH="leftPanelCollapseFullFinish",e.LEFTPANEL_COLLAPSE_FULL_START="leftPanelCollapseFullStart",e.LEFTPANEL_EXPAND_FULL_FINISH="leftPanelExpandFullFinish",e.LEFTPANEL_EXPAND_FULL_START="leftPanelExpandFullStart",e.LOAD="load",e.LOAD_FAILED="loadFailed",e.LOGIN_FAILED="loginFailed",e.LOGIN="login",e.LOGOUT="logout",e.MANIFEST_INDEX_CHANGE="manifestIndexChange",e.METRIC_CHANGE="metricChange",e.MINUS="minus",e.MULTISELECT_CHANGE="multiSelectChange",e.MULTISELECTION_MADE="multiSelectionMade",e.NEXT="next",e.NOT_FOUND="notFound",e.OPEN_EXTERNAL_RESOURCE="openExternalResource",e.OPEN_LEFT_PANEL="openLeftPanel",e.OPEN_RIGHT_PANEL="openRightPanel",e.OPEN_THUMBS_VIEW="openThumbsView",e.OPEN_TREE_VIEW="openTreeView",e.OPEN="open",e.PAGE_DOWN="pageDown",e.PAGE_UP="pageUp",e.PLUS="plus",e.PREV="prev",e.RANGE_CHANGE="rangeChange",e.REDIRECT="redirect",e.REFRESH="refresh",e.RELOAD="reload",e.RESIZE="resize",e.RESOURCE_DEGRADED="resourceDegraded",e.RETRY="retry",e.RETURN="return",e.RIGHT_ARROW="rightArrow",e.RIGHTPANEL_COLLAPSE_FULL_FINISH="rightPanelCollapseFullFinish",e.RIGHTPANEL_COLLAPSE_FULL_START="rightPanelCollapseFullStart",e.RIGHTPANEL_EXPAND_FULL_FINISH="rightPanelExpandFullFinish",e.RIGHTPANEL_EXPAND_FULL_START="rightPanelExpandFullStart",e.SET_TARGET="setTarget",e.SETTINGS_CHANGE="settingsChange",e.SHOW_AUTH_DIALOGUE="showAuthDialogue",e.SHOW_CLICKTHROUGH_DIALOGUE="showClickThroughDialogue",e.SHOW_DOWNLOAD_DIALOGUE="showDownloadDialogue",e.SHOW_EMBED_DIALOGUE="showEmbedDialogue",e.SHOW_EXTERNALCONTENT_DIALOGUE="showExternalContentDialogue",e.SHOW_GENERIC_DIALOGUE="showGenericDialogue",e.SHOW_HELP_DIALOGUE="showHelpDialogue",e.SHOW_INFORMATION="showInformation",e.SHOW_LOGIN_DIALOGUE="showLoginDialogue",e.SHOW_MESSAGE="showMessage",e.SHOW_MOREINFO_DIALOGUE="showMoreInfoDialogue",e.SHOW_MULTISELECT_DIALOGUE="showMultiSelectDialogue",e.SHOW_OVERLAY="showOverlay",e.SHOW_RESTRICTED_DIALOGUE="showRestrictedDialogue",e.SHOW_SETTINGS_DIALOGUE="showSettingsDialogue",e.SHOW_SHARE_DIALOGUE="showShareDialogue",e.SHOW_TERMS_OF_USE="showTermsOfUse",e.TARGET_CHANGE="targetChange",e.THUMB_MULTISELECTED="thumbMultiSelected",e.THUMB_SELECTED="thumbSelected",e.TOGGLE_EXPAND_LEFT_PANEL="toggleExpandLeftPanel",e.TOGGLE_EXPAND_RIGHT_PANEL="toggleExpandRightPanel",e.TOGGLE_FULLSCREEN="toggleFullScreen",e.TREE_NODE_MULTISELECTED="treeNodeMultiSelected",e.TREE_NODE_SELECTED="treeNodeSelected",e.UP_ARROW="upArrow",e.UPDATE_SETTINGS="updateSettings",e.VIEW_FULL_TERMS="viewFullTerms",e.WINDOW_UNLOAD="windowUnload",e}()},function(e,t,n){"use strict";var i,r=function(e){this.isVisible=!0;var t=e.on.match(/.*xywh=(\d*),(\d*),(\d*),(\d*)/);this.x=Number(t[1]),this.y=Number(t[2]),this.width=Number(t[3]),this.height=Number(t[4]),this.chars=e.resource.chars},o=function(){function e(e,t){this.rects=[],this.canvasIndex=t,this.addRect(e)}return e.prototype.addRect=function(e){var t=new r(e);t.canvasIndex=this.canvasIndex,t.index=this.rects.length,this.rects.push(t),this.rects.sort((function(e,t){return e.index-t.index}))},e}(),a=n(1),s=function(){function e(){this.isEnabled=!1,this.ranges=[],this.canvases=[]}return e.prototype.allCanvasesSelected=function(){return this.canvases.length>0&&this.getAllSelectedCanvases().length===this.canvases.length},e.prototype.allRangesSelected=function(){return this.ranges.length>0&&this.getAllSelectedRanges().length===this.ranges.length},e.prototype.allSelected=function(){return this.allRangesSelected()&&this.allCanvasesSelected()},e.prototype.getAll=function(){return this.canvases.concat(this.ranges)},e.prototype.getAllSelectedCanvases=function(){return this.canvases.filter((function(e){return e.multiSelected}))},e.prototype.getAllSelectedRanges=function(){return this.ranges.filter((function(e){return e.multiSelected}))},e.prototype.getCanvasById=function(e){return this.canvases.filter((function(t){return a.Utils.normaliseUrl(t.id)===a.Utils.normaliseUrl(e)}))[0]},e.prototype.getCanvasesByIds=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push(this.getCanvasById(i))}return t},e.prototype.getRangeCanvases=function(e){var t=e.getCanvasIds();return this.getCanvasesByIds(t)},e.prototype.selectAll=function(e){this.selectRanges(this.ranges,e),this.selectCanvases(this.canvases,e)},e.prototype.selectCanvas=function(e,t){this.canvases.filter((function(t){return t.id===e.id}))[0].multiSelected=t},e.prototype.selectAllCanvases=function(e){this.selectCanvases(this.canvases,e)},e.prototype.selectCanvases=function(e,t){for(var n=0;n<e.length;n++){e[n].multiSelected=t}},e.prototype.selectRange=function(e,t){var n=this.ranges.filter((function(t){return t.id===e.id}))[0];n.multiSelected=t;var i=this.getRangeCanvases(n);this.selectCanvases(i,t)},e.prototype.selectAllRanges=function(e){this.selectRanges(this.ranges,e)},e.prototype.selectRanges=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];i.multiSelected=t;var r=this.getCanvasesByIds(i.getCanvasIds());this.selectCanvases(r,t)}},e.prototype.setEnabled=function(e){this.isEnabled=e;for(var t=this.getAll(),n=0;n<t.length;n++){var i=t[n];i.multiSelectEnabled=this.isEnabled,e||(i.multiSelected=!1)}},e}(),c=function(){function e(e,t){this.items=[],this.resource=e,this.label=t}return e.prototype.addItem=function(e){this.items.push(e)},e.prototype.addMetadata=function(e,t){void 0===t&&(t=!1);for(var n=0;n<e.length;n++){var i=e[n];i.isRootLevel=t,this.addItem(i)}},e}();!function(e){e.DATE="date",e.NONE="none"}(i||(i={}));var u=n(0),l=function(){function e(){}return e.manifestNotLoaded="Manifest has not loaded yet",e}(),f=function(){function e(e){this.options=e,this.iiifResource=this.options.iiifResource,this.manifestUri=this.options.manifestUri,this.manifest=this.options.manifest,this.collectionIndex=this.options.collectionIndex||0,this.manifestIndex=this.options.manifestIndex||0,this.sequenceIndex=this.options.sequenceIndex||0,this.canvasIndex=this.options.canvasIndex||0}return e.prototype.getAutoCompleteService=function(){var e=this.getSearchService(),t=null;return e&&((t=e.getService(u.e.SEARCH_0_AUTO_COMPLETE))||(t=e.getService(u.e.SEARCH_1_AUTO_COMPLETE))),t},e.prototype.getAttribution=function(){if(!this.manifest)throw new Error(l.manifestNotLoaded);var e=this.manifest.getAttribution();return e?a.LanguageMap.getValue(e,this.options.locale):null},e.prototype.getCanvases=function(){return this.getCurrentSequence().getCanvases()},e.prototype.getCanvasById=function(e){return this.getCurrentSequence().getCanvasById(e)},e.prototype.getCanvasesById=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],r=this.getCanvasById(i);r&&t.push(r)}return t},e.prototype.getCanvasByIndex=function(e){return this.getCurrentSequence().getCanvasByIndex(e)},e.prototype.getCanvasIndexById=function(e){return this.getCurrentSequence().getCanvasIndexById(e)},e.prototype.getCanvasIndexByLabel=function(e){var t=this.getManifestType()===a.ManifestType.MANUSCRIPT;return this.getCurrentSequence().getCanvasIndexByLabel(e,t)},e.prototype.getCanvasRange=function(e,t){var n=this.getCanvasRanges(e);if(t){for(var i=0;i<n.length;i++){var r=n[i];if(r.path===t)return r}return null}return n[0]},e.prototype.getCanvasRanges=function(e){if(!this.manifest)throw new Error(l.manifestNotLoaded);return e.ranges||(e.ranges=this.manifest.getAllRanges().filter((function(t){return t.getCanvasIds().some((function(t){return a.Utils.normaliseUrl(t)===a.Utils.normaliseUrl(e.id)}))}))),e.ranges},e.prototype.getCollectionIndex=function(e){if(!e.parentCollection||e.parentCollection.parentCollection)return e.parentCollection?e.parentCollection.index:void 0},e.prototype.getCurrentCanvas=function(){return this.getCurrentSequence().getCanvasByIndex(this.canvasIndex)},e.prototype.getCurrentSequence=function(){return this.getSequenceByIndex(this.sequenceIndex)},e.prototype.getDescription=function(){if(!this.manifest)throw new Error(l.manifestNotLoaded);var e=this.manifest.getDescription();return e?a.LanguageMap.getValue(e,this.options.locale):null},e.prototype.getLabel=function(){if(!this.manifest)throw new Error(l.manifestNotLoaded);var e=this.manifest.getLabel();return e?a.LanguageMap.getValue(e,this.options.locale):null},e.prototype.getLastCanvasLabel=function(e){return this.getCurrentSequence().getLastCanvasLabel(e)},e.prototype.getFirstPageIndex=function(){return 0},e.prototype.getLastPageIndex=function(){return this.getTotalCanvases()-1},e.prototype.getLicense=function(){if(!this.manifest)throw new Error(l.manifestNotLoaded);return this.manifest.getLicense()},e.prototype.getLogo=function(){if(!this.manifest)throw new Error(l.manifestNotLoaded);return this.manifest.getLogo()},e.prototype.getManifestType=function(){if(!this.manifest)throw new Error(l.manifestNotLoaded);var e=this.manifest.getManifestType();return e===a.ManifestType.EMPTY&&(e=a.ManifestType.MONOGRAPH),e},e.prototype.getMetadata=function(e){if(!this.manifest)throw new Error(l.manifestNotLoaded);var t=[],n=this.manifest.getMetadata(),i=new c(this.manifest),r=this.options.locale;(n&&n.length&&i.addMetadata(n,!0),this.manifest.getDescription().length)&&((u=new a.LabelValuePair(r)).label=[new a.Language("description",r)],u.value=this.manifest.getDescription(),u.isRootLevel=!0,i.addItem(u));this.manifest.getAttribution().length&&((u=new a.LabelValuePair(r)).label=[new a.Language("attribution",r)],u.value=this.manifest.getAttribution(),u.isRootLevel=!0,i.addItem(u));var o=this.manifest.getLicense();if(o){var s={label:"license",value:e&&e.licenseFormatter?e.licenseFormatter.format(o):o};(u=new a.LabelValuePair(r)).parse(s),u.isRootLevel=!0,i.addItem(u)}if(this.manifest.getLogo()){var u;s={label:"logo",value:'<img src="'+this.manifest.getLogo()+'"/>'};(u=new a.LabelValuePair(r)).parse(s),u.isRootLevel=!0,i.addItem(u)}return t.push(i),e?this._parseMetadataOptions(e,t):t},e.prototype.getRequiredStatement=function(){if(!this.manifest)throw new Error(l.manifestNotLoaded);var e=this.manifest.getRequiredStatement();return e?{label:e.getLabel(),value:e.getValue()}:null},e.prototype._parseMetadataOptions=function(e,t){var n=this.getCurrentSequence(),i=n.getMetadata();if(i&&i.length){var r=new c(n);r.addMetadata(i),t.push(r)}if(e.range){var o=this._getRangeMetadata([],e.range);o=o.reverse(),t=t.concat(o)}if(e.canvases&&e.canvases.length)for(var a=0;a<e.canvases.length;a++){var s=e.canvases[a],u=s.getMetadata();if(u&&u.length){var l=new c(s);l.addMetadata(s.getMetadata()),t.push(l)}for(var f=s.getImages(),h=0;h<f.length;h++){var p=f[h],d=p.getMetadata();if(d&&d.length){var g=new c(p);g.addMetadata(d),t.push(g)}}}return t},e.prototype._getRangeMetadata=function(e,t){var n=t.getMetadata();if(n&&n.length){var i=new c(t);i.addMetadata(n),e.push(i)}else if(t.parentRange)return this._getRangeMetadata(e,t.parentRange);return e},e.prototype.getMultiSelectState=function(){return this._multiSelectState||(this._multiSelectState=new s,this._multiSelectState.ranges=this.getRanges().slice(0),this._multiSelectState.canvases=this.getCurrentSequence().getCanvases().slice(0)),this._multiSelectState},e.prototype.getCurrentRange=function(){return this.rangeId?this.getRangeById(this.rangeId):null},e.prototype.getPosterCanvas=function(){if(!this.manifest)throw new Error(l.manifestNotLoaded);return this.manifest.getPosterCanvas()},e.prototype.getPosterImage=function(){var e=this.getPosterCanvas();if(e){var t=e.getContent();if(t&&t.length)return t[0].getBody()[0].id}return null},e.prototype.getPreviousRange=function(e){var t=null;if(t=e||this.getCurrentRange()){var n=this.getFlattenedTree();if(n)for(var i=0;i<n.length;i++){var r=n[i];if(r&&r.data.id===t.id){for(;i>0;){return n[--i].data}break}}}return null},e.prototype.getNextRange=function(e){var t=null;if(t=e||this.getCurrentRange()){var n=this.getFlattenedTree();if(n)for(var i=0;i<n.length;i++){var r=n[i];if(r&&r.data.id===t.id){for(;i<n.length-1;){var o=n[++i];if(o.data.canvases&&o.data.canvases.length)return o.data}break}}}return null},e.prototype.getFlattenedTree=function(e){var t=null;return(t=e||this.getTree())?this._flattenTree(t,"nodes"):null},e.prototype._flattenTree=function(e,t){var n=this,i=[e];return e[t]&&e[t].length>0?i.concat(e[t].map((function(e){return n._flattenTree(e,t)})).reduce((function(e,t){return e.concat(t)}),[])):i},e.prototype.getRanges=function(){return this.manifest.getAllRanges()},e.prototype.getRangeByPath=function(e){if(!this.manifest)throw new Error(l.manifestNotLoaded);return this.manifest.getRangeByPath(e)},e.prototype.getRangeById=function(e){if(!this.manifest)throw new Error(l.manifestNotLoaded);return this.manifest.getRangeById(e)},e.prototype.getRangeCanvases=function(e){var t=e.getCanvasIds();return this.getCanvasesById(t)},e.prototype.getRelated=function(){if(!this.manifest)throw new Error(l.manifestNotLoaded);return this.manifest.getRelated()},e.prototype.getSearchService=function(){if(!this.manifest)throw new Error(l.manifestNotLoaded);var e=this.manifest.getService(u.e.SEARCH_0);return e||(e=this.manifest.getService(u.e.SEARCH_1)),e},e.prototype.getSeeAlso=function(){if(!this.manifest)throw new Error(l.manifestNotLoaded);return this.manifest.getSeeAlso()},e.prototype.getSequenceByIndex=function(e){if(!this.manifest)throw new Error(l.manifestNotLoaded);return this.manifest.getSequenceByIndex(e)},e.prototype.getShareServiceUrl=function(){if(!this.manifest)throw new Error(l.manifestNotLoaded);var e=null,t=this.manifest.getService(u.e.SHARE_EXTENSIONS);return t&&(t.length&&(t=t[0]),e=t.__jsonld.shareUrl),e},e.prototype._getSortedTreeNodesByDate=function(e,t){var n=this.getFlattenedTree(t);if(n){var i=n.filter((function(e){return e.data.type===a.TreeNodeType.MANIFEST}));this.createDecadeNodes(e,n),this.sortDecadeNodes(e),this.createYearNodes(e,n),this.sortYearNodes(e),this.createMonthNodes(e,i),this.sortMonthNodes(e),this.createDateNodes(e,i),this.pruneDecadeNodes(e)}},e.prototype.getStartCanvasIndex=function(){return this.getCurrentSequence().getStartCanvasIndex()},e.prototype.getThumbs=function(e,t){return this.getCurrentSequence().getThumbs(e,t)},e.prototype.getTopRanges=function(){if(!this.manifest)throw new Error(l.manifestNotLoaded);return this.manifest.getTopRanges()},e.prototype.getTotalCanvases=function(){return this.getCurrentSequence().getTotalCanvases()},e.prototype.getTrackingLabel=function(){if(!this.manifest)throw new Error(l.manifestNotLoaded);return this.manifest.getTrackingLabel()},e.prototype._getTopRanges=function(){return this.iiifResource.getTopRanges()},e.prototype.getTree=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=i.NONE),!this.iiifResource)return null;var n;if(this.iiifResource.isCollection())n=this.iiifResource.getDefaultTree();else{var r=this._getTopRanges(),o=new a.TreeNode;if(o.label="root",o.data=this.iiifResource,!r.length)return o;n=r[e].getTree(o)}var s=new a.TreeNode;switch(t.toString()){case i.DATE.toString():if(this.treeHasNavDates(n)){this._getSortedTreeNodesByDate(s,n);break}default:s=n}return s},e.prototype.treeHasNavDates=function(e){var t=this.getFlattenedTree(e);return!!t&&t.some((function(e){return!isNaN(e.navDate)}))},e.prototype.getViewingDirection=function(){if(!this.manifest)throw new Error(l.manifestNotLoaded);var e=this.getCurrentSequence().getViewingDirection();return e||(e=this.manifest.getViewingDirection()),e},e.prototype.getViewingHint=function(){if(!this.manifest)throw new Error(l.manifestNotLoaded);var e=this.getCurrentSequence().getViewingHint();return e||(e=this.manifest.getViewingHint()),e},e.prototype.hasParentCollection=function(){if(!this.manifest)throw new Error(l.manifestNotLoaded);return!!this.manifest.parentCollection},e.prototype.hasRelatedPage=function(){var e=this.getRelated();return!!e&&(e.length&&(e=e[0]),"text/html"===e.format)},e.prototype.hasResources=function(){return this.getCurrentCanvas().getResources().length>0},e.prototype.isBottomToTop=function(){var e=this.getViewingDirection();return!!e&&e===u.f.BOTTOM_TO_TOP},e.prototype.isCanvasIndexOutOfRange=function(e){return this.getCurrentSequence().isCanvasIndexOutOfRange(e)},e.prototype.isContinuous=function(){var e=this.getViewingHint();return!!e&&e===u.g.CONTINUOUS},e.prototype.isFirstCanvas=function(e){return void 0!==e?this.getCurrentSequence().isFirstCanvas(e):this.getCurrentSequence().isFirstCanvas(this.canvasIndex)},e.prototype.isHorizontallyAligned=function(){return this.isLeftToRight()||this.isRightToLeft()},e.prototype.isLastCanvas=function(e){return void 0!==e?this.getCurrentSequence().isLastCanvas(e):this.getCurrentSequence().isLastCanvas(this.canvasIndex)},e.prototype.isLeftToRight=function(){var e=this.getViewingDirection();return!!e&&e===u.f.LEFT_TO_RIGHT},e.prototype.isMultiCanvas=function(){return this.getCurrentSequence().isMultiCanvas()},e.prototype.isMultiSequence=function(){if(!this.manifest)throw new Error(l.manifestNotLoaded);return this.manifest.isMultiSequence()},e.prototype.isPaged=function(){if(!this.manifest)throw new Error(l.manifestNotLoaded);var e=this.getViewingHint();return e?e===u.g.PAGED:this.manifest.isPagingEnabled()},e.prototype.isPagingAvailable=function(){return this.isPagingEnabled()&&this.getTotalCanvases()>2},e.prototype.isPagingEnabled=function(){if(!this.manifest)throw new Error(l.manifestNotLoaded);return this.manifest.isPagingEnabled()||this.getCurrentSequence().isPagingEnabled()},e.prototype.isRightToLeft=function(){var e=this.getViewingDirection();return!!e&&e===u.f.RIGHT_TO_LEFT},e.prototype.isTopToBottom=function(){var e=this.getViewingDirection();return!!e&&e===u.f.TOP_TO_BOTTOM},e.prototype.isTotalCanvasesEven=function(){return this.getCurrentSequence().isTotalCanvasesEven()},e.prototype.isUIEnabled=function(e){if(!this.manifest)throw new Error(l.manifestNotLoaded);var t=this.manifest.getService(u.e.UI_EXTENSIONS);if(t){var n=t.getProperty("disableUI");if(n&&(-1!==n.indexOf(e)||-1!==n.indexOf(e.toLowerCase())))return!1}return!0},e.prototype.isVerticallyAligned=function(){return this.isTopToBottom()||this.isBottomToTop()},e.prototype.createDateNodes=function(e,t){for(var n=0;n<t.length;n++){var i=t[n],r=this.getNodeYear(i),o=this.getNodeMonth(i),s=new a.TreeNode;s.id=i.id,s.label=this.getNodeDisplayDate(i),s.data=i.data,s.data.type=a.TreeNodeType.MANIFEST,s.data.year=r,s.data.month=o;var c=this.getDecadeNode(e,r);if(c){var u=this.getYearNode(c,r);if(u){var l=this.getMonthNode(u,o);l&&l.addNode(s)}}}},e.prototype.createDecadeNodes=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(i.navDate){var r=this.getNodeYear(i),o=Number(r.toString().substr(0,3)+"9");if(!this.getDecadeNode(e,r)){var s=new a.TreeNode;s.label=r+" - "+o,s.navDate=i.navDate,s.data.startYear=r,s.data.endYear=o,e.addNode(s)}}}},e.prototype.createMonthNodes=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(i.navDate){var r=this.getNodeYear(i),o=this.getNodeMonth(i),s=this.getDecadeNode(e,r),c=null;if(s&&(c=this.getYearNode(s,r)),s&&c&&!this.getMonthNode(c,o)){var u=new a.TreeNode;u.label=this.getNodeDisplayMonth(i),u.navDate=i.navDate,u.data.year=r,u.data.month=o,c.addNode(u)}}}},e.prototype.createYearNodes=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(i.navDate){var r=this.getNodeYear(i),o=this.getDecadeNode(e,r);if(o&&!this.getYearNode(o,r)){var s=new a.TreeNode;s.label=r.toString(),s.navDate=i.navDate,s.data.year=r,o.addNode(s)}}}},e.prototype.getDecadeNode=function(e,t){for(var n=0;n<e.nodes.length;n++){var i=e.nodes[n];if(t>=i.data.startYear&&t<=i.data.endYear)return i}return null},e.prototype.getMonthNode=function(e,t){for(var n=0;n<e.nodes.length;n++){var i=e.nodes[n];if(t===this.getNodeMonth(i))return i}return null},e.prototype.getNodeDisplayDate=function(e){return e.navDate.toDateString()},e.prototype.getNodeDisplayMonth=function(e){return["January","February","March","April","May","June","July","August","September","October","November","December"][e.navDate.getMonth()]},e.prototype.getNodeMonth=function(e){return e.navDate.getMonth()},e.prototype.getNodeYear=function(e){return e.navDate.getFullYear()},e.prototype.getYearNode=function(e,t){for(var n=0;n<e.nodes.length;n++){var i=e.nodes[n];if(t===this.getNodeYear(i))return i}return null},e.prototype.pruneDecadeNodes=function(e){for(var t=[],n=0;n<e.nodes.length;n++){var i=e.nodes[n];i.nodes.length||t.push(i)}for(var r=0;r<t.length;r++){var o=t[r],a=e.nodes.indexOf(o);a>-1&&e.nodes.splice(a,1)}},e.prototype.sortDecadeNodes=function(e){e.nodes=e.nodes.sort((function(e,t){return e.data.startYear-t.data.startYear}))},e.prototype.sortMonthNodes=function(e){for(var t=this,n=0;n<e.nodes.length;n++)for(var i=e.nodes[n],r=0;r<i.nodes.length;r++){var o=i.nodes[r];o.nodes=o.nodes.sort((function(e,n){return t.getNodeMonth(e)-t.getNodeMonth(n)}))}},e.prototype.sortYearNodes=function(e){for(var t=this,n=0;n<e.nodes.length;n++){var i=e.nodes[n];i.nodes=i.nodes.sort((function(e,n){return t.getNodeYear(e)-t.getNodeYear(n)}))}},e}(),h=function(){function e(e){this._options=e,this._options.locale=this._options.locale||"en-GB"}return e.prototype.bootstrap=function(e,t){var n=this;return new Promise((function(i,r){e&&t&&(i=e,r=t),a.Utils.loadManifest(n._options.manifestUri).then((function(e){n._loaded(n,e,i,r)}))}))},e.prototype._loaded=function(e,t,n,i){var r=a.Utils.parseManifest(t,{locale:e._options.locale});if(r){e._options.iiifResource||(e._options.iiifResource=r);var o=e._options.collectionIndex,s=e._options.manifestIndex;if(r.getIIIFResourceType()===u.b.COLLECTION){var c=r.getManifests(),l=r.getCollections();c.length||void 0!==o||(o=0),void 0!==o&&l&&l.length?r.getCollectionByIndex(o).then((function(t){t||i("Collection index not found"),0===t.getTotalManifests()&&0===s&&t.getTotalCollections()>0?(e._options.collectionIndex=0,e._options.manifestUri=t.id,e.bootstrap(n,i)):void 0!==s&&t.getManifestByIndex(s).then((function(t){e._options.manifest=t;var i=new f(e._options);n(i)}))})):r.getManifestByIndex(e._options.manifestIndex).then((function(t){e._options.manifest=t;var i=new f(e._options);n(i)}))}else{e._options.manifest=r;var h=new f(e._options);n(h)}}else console.error("Unable to load IIIF resource")},e}(),p=n(2),d=function(){function e(e,t){this.authHoldingPage=null,this.clickThroughService=null,this.externalService=null,this.isProbed=!1,this.isResponseHandled=!1,this.kioskService=null,this.loginService=null,this.logoutService=null,this.probeService=null,this.restrictedService=null,this.tokenService=null,e.externalResource=this,this.dataUri=this._getDataUri(e),this.index=e.index,this.authAPIVersion=t.authApiVersion,this._parseAuthServices(e),this._parseCanvasDimensions(e)}return e.prototype._getImageServiceDescriptor=function(e){for(var t=null,n=0;n<e.length;n++){var i=e[n],r=i.id;r.endsWith("/")||(r+="/"),a.Utils.isImageProfile(i.getProfile())&&(t=r+"info.json")}return t},e.prototype._getDataUri=function(e){var t=e.getContent(),n=e.getImages(),i=null;if(t&&t.length){var r=t[0].getBody();return r.length?(o=r[0].getServices()).length&&(i=this._getImageServiceDescriptor(o))?i:r[0].id:null}if(n&&n.length){var o,a=n[0].getResource();return(o=a.getServices()).length&&(i=this._getImageServiceDescriptor(o))?i:a.id}var s=e.getService(u.e.IXIF);return s?s.getInfoUri():e.id},e.prototype._parseAuthServices=function(e){if(.9===this.authAPIVersion)this.clickThroughService=a.Utils.getService(e,u.e.AUTH_0_CLICK_THROUGH),this.loginService=a.Utils.getService(e,u.e.AUTH_0_LOGIN),this.restrictedService=a.Utils.getService(e,u.e.AUTH_0_RESTRICTED),this.clickThroughService?(this.logoutService=this.clickThroughService.getService(u.e.AUTH_0_LOGOUT),this.tokenService=this.clickThroughService.getService(u.e.AUTH_0_TOKEN)):this.loginService?(this.logoutService=this.loginService.getService(u.e.AUTH_0_LOGOUT),this.tokenService=this.loginService.getService(u.e.AUTH_0_TOKEN)):this.restrictedService&&(this.logoutService=this.restrictedService.getService(u.e.AUTH_0_LOGOUT),this.tokenService=this.restrictedService.getService(u.e.AUTH_0_TOKEN));else{if(void 0!==e.isCanvas&&e.isCanvas()){var t=e.getContent();if(t&&t.length){var n=t[0].getBody();if(n&&n.length)e=n[0]}}this.clickThroughService=a.Utils.getService(e,u.e.AUTH_1_CLICK_THROUGH),this.loginService=a.Utils.getService(e,u.e.AUTH_1_LOGIN),this.externalService=a.Utils.getService(e,u.e.AUTH_1_EXTERNAL),this.kioskService=a.Utils.getService(e,u.e.AUTH_1_KIOSK),this.clickThroughService?(this.logoutService=this.clickThroughService.getService(u.e.AUTH_1_LOGOUT),this.tokenService=this.clickThroughService.getService(u.e.AUTH_1_TOKEN),this.probeService=this.clickThroughService.getService(u.e.AUTH_1_PROBE)):this.loginService?(this.logoutService=this.loginService.getService(u.e.AUTH_1_LOGOUT),this.tokenService=this.loginService.getService(u.e.AUTH_1_TOKEN),this.probeService=this.loginService.getService(u.e.AUTH_1_PROBE)):this.externalService?(this.logoutService=this.externalService.getService(u.e.AUTH_1_LOGOUT),this.tokenService=this.externalService.getService(u.e.AUTH_1_TOKEN),this.probeService=this.externalService.getService(u.e.AUTH_1_PROBE)):this.kioskService&&(this.logoutService=this.kioskService.getService(u.e.AUTH_1_LOGOUT),this.tokenService=this.kioskService.getService(u.e.AUTH_1_TOKEN),this.probeService=this.kioskService.getService(u.e.AUTH_1_PROBE))}},e.prototype._parseCanvasDimensions=function(e){var t=e.getImages();if(t&&t.length){var n=t[0].getResource();this.width=n.getWidth(),this.height=n.getHeight()}else if((t=e.getContent()).length){var i=t[0].getBody();i.length&&(this.width=i[0].getWidth(),this.height=i[0].getHeight())}},e.prototype._parseDescriptorDimensions=function(e){void 0!==e.width&&(this.width=e.width),void 0!==e.height&&(this.height=e.height)},e.prototype.isAccessControlled=function(){return!!(this.clickThroughService||this.loginService||this.externalService||this.kioskService||this.probeService)},e.prototype.hasServiceDescriptor=function(){return!!this.dataUri&&this.dataUri.endsWith("info.json")},e.prototype.getData=function(e){var t=this;return t.data={},new Promise((function(n,i){if(t.dataUri)if(t.probeService){t.isProbed=!0;var r=new XMLHttpRequest;r.open("GET",t.probeService.id,!0),r.withCredentials=!0,r.onload=function(){var e=JSON.parse(r.responseText);unescape(e.contentLocation)!==t.dataUri?t.status=p.MOVED_TEMPORARILY:t.status=p.OK,n(t)},r.onerror=function(){t.status=r.status,n(t)},r.send()}else{var o="GET";if(!t.hasServiceDescriptor()){if(!t.isAccessControlled())return t.status=p.OK,void n(t);o="HEAD"}var a=new XMLHttpRequest;a.open(o,t.dataUri,!0),e&&a.setRequestHeader("Authorization","Bearer "+e.accessToken),a.onload=function(){var e=JSON.parse(a.responseText);if(e){var i=unescape(e["@id"]);t.data=e,t._parseAuthServices(t.data),t._parseDescriptorDimensions(t.data),i.endsWith("/info.json")&&(i=i.substr(0,i.lastIndexOf("/")));var r=t.dataUri;r&&r.endsWith("/info.json")&&(r=r.substr(0,r.lastIndexOf("/"))),i!==r&&t.loginService?t.status=p.MOVED_TEMPORARILY:t.status=p.OK,n(t)}else t.status=p.OK,n(t)},a.onerror=function(){t.status=a.status,a.responseText&&t._parseAuthServices(JSON.parse(a.responseText)),n(t)},a.send()}else i("There is no dataUri to fetch")}))},e}(),g=function(){function e(e){this.labels=e}return e.prototype.format=function(e){return-1!=e.indexOf("<a")?e:'<a href="'+e+'">'+(this.labels[e]?this.labels[e]:e)+"</a>"},e}();n.d(t,"e",(function(){return _})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return g}));var _=function(e){return new h(e).bootstrap()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(){function e(e){this.options=e,this.options.data=Object.assign({},this.data(),e.data)}return e.prototype._init=function(){return this.el=this.options.target,this.el?(this.el.innerHTML="",!0):(console.warn("element not found"),!1)},e.prototype.data=function(){return{}},e.prototype.on=function(e,t,n){var i=this._e||(this._e={});(i[e]||(i[e]=[])).push({fn:t,ctx:n})},e.prototype.fire=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=[].slice.call(arguments,1),r=((this._e||(this._e={}))[e]||[]).slice(),o=0,a=r.length;o<a;o++)r[o].fn.apply(r[o].ctx,i)},e.prototype._resize=function(){},e.prototype.set=function(e){},e}()},function(e,t,n){e.exports=n(9)},function(e,t){!function(e){e.fn.checkboxButton=function(t){return this.each((function(){e(this).on("click",(function(n){var i=n.target.tagName,r=e(this).find(":checkbox");"INPUT"!==i&&(n.preventDefault(),r.prop("checked",!r.prop("checked")));var o=r.is(":checked");t.call(this,o)}))}))},e.fn.disable=function(){return this.each((function(){var t=e(this);t.addClass("disabled"),t.data("tabindex",t.attr("tabindex")),t.removeAttr("tabindex")}))},e.fn.ellipsis=function(t){return this.each((function(){var n=e(this),i=n.text();if(i.length>t){var r=i.substr(0,t);r=r.substr(0,Math.min(r.length,r.lastIndexOf(" "))),n.empty().html(r+"&hellip;")}}))},e.fn.ellipsisFill=function(t){var n=!0;return t||(n=!1),this.each((function(){var i=e(this);n||(t=i.text()),i.empty();var r=e('<span title="'+t+'"></span>');if(i.append(r),i.css("overflow","hidden"),r.css("white-space","nowrap"),r.html(t),r.width()>i.width())for(var o=null;r.width()>i.width();){var a=r.html();if((a=a.substring(0,a.lastIndexOf(" "))+"&hellip;")===o)break;r.html(a),o=a}}))},e.fn.ellipsisHtmlFixed=function(t,n){return this.each((function(){var i=e(this),r=i.html(),o=e("<span></span>");if(o.html(i.html().replace(/\s[\s]*/g," ").trim()),!(o.text().trim().length<=t)){for(;o.text().trim().length>t;)o.removeLastWord(t);var a=o.html(),s=!1;i.toggle=function(){i.empty();var t=e('<a href="#" class="toggle"></a>');s?(i.html(r+" "),t.text("less"),t.switchClass("less","more")):(i.html(a+"&hellip; "),t.text("more"),t.switchClass("more","less")),t.one("click",(function(e){e.preventDefault(),i.toggle()})),s=!s,i.append(t),n&&n()},i.toggle()}}))},e.fn.enable=function(){return this.each((function(){var t=e(this);t.removeClass("disabled"),t.attr("tabindex",t.data("tabindex"))}))},e.fn.equaliseHeight=function(t,n){var i=-1,r=Number.MAX_VALUE,o=[];t&&this.each((function(){e(this).height("auto")})),this.each((function(){var t=e(this).height();o.push(t),i=i>t?i:t,r=r<t?r:t}));var a=i;if(n){o.sort((function(e,t){return e-t}));var s=Math.floor(o.length/2);a=o.length%2?o[s]:(o[s-1]+o[s])/2}return this.each((function(){e(this).height(a)})),this},e.fn.getVisibleElementWithGreatestTabIndex=function(){var t=e(this),n=0,i=null;return t.find("*:visible[tabindex]").each((function(t,r){var o=e(r),a=parseInt(o.attr("tabindex"));a>n&&(n=a,i=o)})),i},e.fn.horizontalMargins=function(){var t=e(this);return parseInt(t.css("marginLeft"))+parseInt(t.css("marginRight"))},e.fn.leftMargin=function(){var t=e(this);return parseInt(t.css("marginLeft"))},e.fn.rightMargin=function(){var t=e(this);return parseInt(t.css("marginRight"))},e.fn.horizontalPadding=function(){var t=e(this);return parseInt(t.css("paddingLeft"))+parseInt(t.css("paddingRight"))},e.fn.leftPadding=function(){var t=e(this);return parseInt(t.css("paddingLeft"))},e.fn.rightPadding=function(){var t=e(this);return parseInt(t.css("paddingRight"))},e.mlp={x:0,y:0},e((function t(){var n=this===document?e(this):e(this).contents();n.mousemove((function(e){jQuery.mlp={x:e.pageX,y:e.pageY}})),n.find("iframe").on("load",t)})),e.fn.ismouseover=function(){var t=!1;return this.eq(0).each((function(){var n=e(this).is("iframe")?e(this).contents().find("body"):e(this),i=n.offset();t=i.left<=e.mlp.x&&i.left+n.outerWidth()>e.mlp.x&&i.top<=e.mlp.y&&i.top+n.outerHeight()>e.mlp.y})),t};var t,n=e.fn.on;e.fn.on=function(){var e=Array.apply(null,arguments),i=e[e.length-1];if(isNaN(i)||1===i&&e.pop())return n.apply(this,e);var r=e.pop(),o=e.pop();return e.push((function(){var e=this,n=arguments;clearTimeout(t),t=setTimeout((function(){o.apply(e,n)}),r)})),n.apply(this,e)},e.fn.onEnter=function(t){return this.each((function(){e(this).on("keyup",(function(e){13===e.keyCode&&(e.preventDefault(),t())}))}))},e.fn.onPressed=function(t){return this.each((function(){var n=e(this);n.on("touchstart click",(function(e){e.preventDefault(),t(e)})),n.on("keydown",(function(e){13===e.keyCode&&(e.preventDefault(),t(e))}))}))},e.fn.removeLastWord=function(t,n){return void 0===t&&(t=8),void 0===n&&(n=0),this.each((function(){var i=e(this);if(i.contents().length>0){var r=i.contents().last();if(3===r[0].nodeType){var o=r.text().trim().split(" ");if(o.length>1)return o.splice(o.length-1,1),void(r[0].data=o.join(" "));if(void 0!==t&&1===o.length&&o[0].length>t)return void(r[0].data=o.join(" ").substring(0,t))}r.removeLastWord(t,n+1)}else n>0&&i.remove()}))},e.fn.switchClass=function(t,n){return this.each((function(){e(this).removeClass(t).addClass(n)}))},e.fn.targetBlank=function(){return this.each((function(){e(this).find("a").prop("target","_blank")}))},e.fn.toggleExpandText=function(t,n,i,r){return this.each((function(){var o=e(this),a=o.html();if(!(t>a.length)){var s=!1,c=a.substr(0,t);c=c.substr(0,Math.min(c.length,c.lastIndexOf(" "))),o.toggle=function(){o.empty();var t=e('<a href="#" class="toggle"></a>');s?(o.html(a+"&nbsp;"),t.text(n),t.switchClass("less","more")):(o.html(c+"&nbsp;"),t.text(i),t.switchClass("more","less")),t.one("click",(function(e){e.preventDefault(),o.toggle()})),s=!s,o.append(t),r&&r()},o.toggle()}}))},e.fn.toggleExpandTextByLines=function(t,n,i,r){return this.each((function(){for(var o=e(this),a=o.html(),s=e('<span>&hellip; <a href="#" class="toggle more">morepad</a></span>'),c=[a],u=o.height();o.text().length>0;){o.removeLastWord();var l=o.html();o.append(s),u>o.height()&&(c.unshift(l),u=o.height()),s.remove()}if(c.length<=t)o.html(a);else{var f=c[t-1],h=!1;o.toggle=function(){o.empty();var t=e('<a href="#" class="toggle"></a>');h?(o.html(a+" "),t.text(n),t.switchClass("less","more")):(o.html(f+"&hellip; "),t.text(i),t.switchClass("more","less")),t.one("click",(function(e){e.preventDefault(),o.toggle()})),h=!h,o.append(t),r&&r()},o.toggle()}}))},e.fn.toggleText=function(t,n){return this.each((function(){e(this).text()===t?e(this).text(n):e(this).text(t)}))},e.fn.updateAttr=function(t,n,i){return this.each((function(){var r=e(this),o=r.attr(t);o&&0===o.indexOf(n)&&(o=o.replace(n,i),r.attr(t,o))}))},e.fn.verticalMargins=function(){var t=e(this);return parseInt(t.css("marginTop"))+parseInt(t.css("marginBottom"))},e.fn.verticalPadding=function(){var t=e(this);return parseInt(t.css("paddingTop"))+parseInt(t.css("paddingBottom"))}}(jQuery)},function(e,t,n){"use strict";n.r(t);var i,r,o=function(){function e(e){this.readonly=!1,this.readonly=e}return e.prototype.get=function(e,t){return null},e.prototype.set=function(e,t){},e}(),a=n(3),s=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e){function t(t){return void 0===t&&(t=!1),e.call(this,t)||this}return s(t,e),t.prototype.get=function(e,t){return a.o.getHashParameter(e,document)||t},t.prototype.set=function(e,t){this.readonly||(t?a.o.setHashParameter(e,t.toString(),document):a.o.setHashParameter(e,"",document))},t}(o),u=n(4),l=function(){function e(){this.events={}}return e.prototype.publish=function(e,t){var n=this,i=this.events[e];void 0!==i&&i.forEach((function(e){e.call(n,t)}))},e.prototype.subscribe=function(e,t){var n=this.events[e];void 0===n&&(n=this.events[e]=[]),n.push(t)},e.prototype.unsubscribe=function(e,t){var n=this.events[e];if(void 0!==n){var i=n.indexOf(t);n.splice(i)}},e.prototype.dispose=function(){this.events={}},e}(),f=n(0),h=n(5),p=n(6);n(8);!function(){if("function"==typeof window.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e,Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(e){e=0===arguments.length||!!e;var t=this.parentNode,n=window.getComputedStyle(t,void 0),i=parseInt(n.getPropertyValue("border-top-width")),r=parseInt(n.getPropertyValue("border-left-width")),o=this.offsetTop-t.offsetTop<t.scrollTop,a=this.offsetTop-t.offsetTop+this.clientHeight-i>t.scrollTop+t.clientHeight,s=this.offsetLeft-t.offsetLeft<t.scrollLeft,c=this.offsetLeft-t.offsetLeft+this.clientWidth-r>t.scrollLeft+t.clientWidth,u=o&&!a;(o||a)&&e&&(t.scrollTop=this.offsetTop-t.offsetTop-t.clientHeight/2-i+this.clientHeight/2),(s||c)&&e&&(t.scrollLeft=this.offsetLeft-t.offsetLeft-t.clientWidth/2-r+this.clientWidth/2),(o||a||s||c)&&!e&&this.scrollIntoView(u)})}(),r=navigator.userAgent||navigator.vendor||window.opera,(jQuery.browser=jQuery.browser||{}).mobile=/(android|bb\d+|meego).+mobile|avantgo|bada\/|android|ipad|playbook|silk|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4)),window.browserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"Other",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"Unknown","Explorer"==this.browser&&"7"==this.version&&navigator.userAgent.match(/Trident/i)&&(this.version=this.searchVersionIE())},searchString:function(e){for(var t=0;t<e.length;t++){var n=e[t].string;if(this.versionSearchString=e[t].subString,-1!=n.indexOf(e[t].subString))return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(-1!=t)return parseFloat(e.substring(t+this.versionSearchString.length+1))},searchVersionIE:function(){var e,t=navigator.userAgent.toString().toLowerCase(),n=/(trident)(?:.*rv:([\w.]+))?/.exec(t)||/(msie) ([\w.]+)/.exec(t)||["",null,-1];try{e=n[2].split(".")[0]}catch(t){e="unknown"}return e},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer"},{string:navigator.userAgent,subString:"Trident",identity:"Explorer"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"Safari",identity:"Safari"},{string:navigator.userAgent,subString:"Opera",identity:"Opera"}]},window.browserDetect.init();var d,g=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),_=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{c(i.next(e))}catch(e){o(e)}}function s(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))},E=function(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};!function(e){e.ALEPH="uv-aleph-extension",e.DEFAULT="uv-default-extension",e.EBOOK="uv-ebook-extension",e.MEDIAELEMENT="uv-mediaelement-extension",e.MODELVIEWER="uv-model-viewer-extension",e.OSD="uv-openseadragon-extension",e.PDF="uv-pdf-extension"}(d||(d={}));var v=function(e){function t(t){var n=e.call(this,t)||this;return n.isFullScreen=!1,n.dataProvider=new c(!!t.data.readOnlyDataProvider),n._pubsub=new l,n._init(),n._resize(),n}return g(t,e),t.prototype._init=function(){var t,i=this;return e.prototype._init.call(this),this._extensions=((t={})[d.ALEPH]=function(){return _(i,void 0,void 0,(function(){var e,t;return E(this,(function(i){switch(i.label){case 0:return[4,Promise.all([n.e(3),n.e(25),n.e(2),n.e(17)]).then(n.bind(null,291))];case 1:return e=i.sent(),(t=new e.default).name=d.ALEPH,[2,t]}}))}))},t[d.DEFAULT]=function(){return _(i,void 0,void 0,(function(){var e,t;return E(this,(function(i){switch(i.label){case 0:return[4,Promise.all([n.e(3),n.e(2),n.e(18)]).then(n.bind(null,296))];case 1:return e=i.sent(),(t=new e.default).name=d.DEFAULT,[2,t]}}))}))},t[d.EBOOK]=function(){return _(i,void 0,void 0,(function(){var e,t;return E(this,(function(i){switch(i.label){case 0:return[4,Promise.all([n.e(3),n.e(26),n.e(2),n.e(19)]).then(n.bind(null,292))];case 1:return e=i.sent(),(t=new e.default).name=d.EBOOK,[2,t]}}))}))},t[d.MEDIAELEMENT]=function(){return _(i,void 0,void 0,(function(){var e,t;return E(this,(function(i){switch(i.label){case 0:return[4,Promise.all([n.e(3),n.e(27),n.e(2),n.e(20)]).then(n.bind(null,295))];case 1:return e=i.sent(),(t=new e.default).name=d.MEDIAELEMENT,[2,t]}}))}))},t[d.MODELVIEWER]=function(){return _(i,void 0,void 0,(function(){var e,t;return E(this,(function(i){switch(i.label){case 0:return[4,Promise.all([n.e(3),n.e(4),n.e(28),n.e(2),n.e(21)]).then(n.bind(null,293))];case 1:return e=i.sent(),(t=new e.default).name=d.MODELVIEWER,[2,t]}}))}))},t[d.OSD]=function(){return _(i,void 0,void 0,(function(){var e,t;return E(this,(function(i){switch(i.label){case 0:return[4,Promise.all([n.e(3),n.e(4),n.e(29),n.e(2),n.e(22)]).then(n.bind(null,290))];case 1:return e=i.sent(),(t=new e.default).name=d.OSD,[2,t]}}))}))},t[d.PDF]=function(){return _(i,void 0,void 0,(function(){var e,t;return E(this,(function(i){switch(i.label){case 0:return[4,Promise.all([n.e(3),n.e(2),n.e(23)]).then(n.bind(null,294))];case 1:return e=i.sent(),(t=new e.default).name=d.PDF,[2,t]}}))}))},t),this._extensionRegistry={},this._extensionRegistry[f.a.CANVAS]={load:this._extensions[d.OSD]},this._extensionRegistry[f.a.DOCUMENT]={load:this._extensions[d.PDF]},this._extensionRegistry[f.a.IMAGE]={load:this._extensions[d.OSD]},this._extensionRegistry[f.a.MOVING_IMAGE]={load:this._extensions[d.MEDIAELEMENT]},this._extensionRegistry[f.a.PHYSICAL_OBJECT]={load:this._extensions[d.MODELVIEWER]},this._extensionRegistry[f.a.SOUND]={load:this._extensions[d.MEDIAELEMENT]},this._extensionRegistry[f.d.PDF]={load:this._extensions[d.PDF]},this._extensionRegistry[f.c.AUDIO_MP4]={load:this._extensions[d.MEDIAELEMENT]},this._extensionRegistry.default={load:this._extensions[d.DEFAULT]},this._extensionRegistry[f.c.DRACO]={load:this._extensions[d.MODELVIEWER]},this._extensionRegistry[f.c.GLB]={load:this._extensions[d.MODELVIEWER]},this._extensionRegistry[f.c.GLTF]={load:this._extensions[d.MODELVIEWER]},this._extensionRegistry[f.c.JPG]={load:this._extensions[d.OSD]},this._extensionRegistry[f.c.MP3]={load:this._extensions[d.MEDIAELEMENT]},this._extensionRegistry[f.c.PDF]={load:this._extensions[d.PDF]},this._extensionRegistry[f.c.USDZ]={load:this._extensions[d.MODELVIEWER]},this._extensionRegistry[f.c.VIDEO_MP4]={load:this._extensions[d.MEDIAELEMENT]},this._extensionRegistry[f.c.EPUB]={load:this._extensions[d.EBOOK]},this._extensionRegistry[f.c.OPF]={load:this._extensions[d.EBOOK]},this.set(this.options.data),!0},t.prototype.data=function(){return{assetsDir:"/uv-assets",canvasIndex:0,embedded:!1,isReload:!1,limitLocales:!1,manifestUri:"",locales:[{name:"en-GB"}],target:""}},t.prototype.set=function(e){if(this.extension){var t=Object.assign({},this.extension.data,e);t.isReload!==this.extension.data.isReload||t.manifestUri!==this.extension.data.manifestUri||t.manifestIndex!==this.extension.data.manifestIndex||t.collectionIndex!==this.extension.data.collectionIndex?(this.extension.data=t,this._reload(this.extension.data)):(this.extension.data=t,this.extension.render())}else{if(!e.manifestUri)return void console.warn("manifestUri is required.");e.assetsDir&&e.assetsDir.endsWith("/")&&(e.assetsDir=e.assetsDir.substring(0,e.assetsDir.length-1)),this._reload(e)}},t.prototype._getExtension=function(e){return this._extensionRegistry[e]||(e="default"),this._extensionRegistry[e].load()},t.prototype.get=function(e){if(this.extension)return this.extension.data[e]},t.prototype.publish=function(e,t){this._pubsub.publish(e,t)},t.prototype.subscribe=function(e,t){this._pubsub.subscribe(e,t)},t.prototype._reload=function(e){return _(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,c,l,f,p,d,g=this;return E(this,(function(_){switch(_.label){case 0:return this._pubsub.dispose(),e.target="",this.subscribe(u.a.RELOAD,(function(e){g.fire(u.a.RELOAD,e)})),(t=$(this.options.target)).empty(),t.addClass("loading"),n=this,[4,Object(h.e)({manifestUri:e.manifestUri,collectionIndex:e.collectionIndex,manifestIndex:e.manifestIndex||0,canvasIndex:e.canvasIndex||0,rangeId:e.rangeId,locale:e.locales?e.locales[0].name:void 0})];case 1:return i=_.sent(),(r=i.getTrackingLabel())&&(r+=document.referrer,window.trackingLabel=r),(o=i.getCurrentCanvas())?(s=o.getContent()).length?(c=s[0],(l=c.getBody())&&l.length?(d=l[0].getFormat())?[4,n._getExtension(d)]:[3,5]:[3,7]):[3,8]:(n._error("Canvas "+e.canvasIndex+" not found."),[2]);case 2:return(a=_.sent())?[3,4]:(f=l[0].getType())?[4,n._getExtension(f)]:[3,4];case 3:a=_.sent(),_.label=4;case 4:return[3,7];case 5:return(f=l[0].getType())?[4,n._getExtension(f)]:[3,7];case 6:a=_.sent(),_.label=7;case 7:return[3,12];case 8:return(p=o.getType())?[4,n._getExtension(p)]:[3,10];case 9:a=_.sent(),_.label=10;case 10:return a?[3,12]:(d=o.getProperty("format"),[4,n._getExtension(d)]);case 11:a=_.sent(),_.label=12;case 12:return a?[3,14]:[4,n._getExtension("default")];case 13:a=_.sent(),_.label=14;case 14:return n._configure(e,a,(function(t){e.config=t,n._injectCss(e,a,(function(){n._createExtension(a,e,i)}))})),[2]}}))}))},t.prototype._error=function(e){this.fire(u.a.ERROR,e)},t.prototype._configure=function(e,t,n){var i=this;this._getConfigExtension(e,t,(function(r){if(e.locales){var o=e.assetsDir+"/config/"+t.name+"."+e.locales[0].name+".config.json";$.getJSON(o,(function(o){i._extendConfig(e,t,o,r,n)}))}}))},t.prototype._extendConfig=function(e,t,n,i,r){n.name=t.name,i&&(n.uri=e.configUri,$.extend(!0,n,i)),r(n)},t.prototype._getConfigExtension=function(e,t,n){if(e.locales){var i=sessionStorage.getItem(t.name+"."+e.locales[0].name),r=e.configUri;i?n(JSON.parse(i)):r?$.getJSON(r,(function(e){n(e)})):n(null)}},t.prototype._injectCss=function(e,t,n){if(e.locales){var i=e.assetsDir+"/themes/"+e.config.options.theme+"/css/"+t.name+"/theme.css",r=e.locales[0].name,o=t.name.toLowerCase()+"-theme-"+r.toLowerCase();$("#"+o.toLowerCase()).length||$("head").append('<link rel="stylesheet" id="'+o+'" href="'+i.toLowerCase()+'" />'),n()}},t.prototype._createExtension=function(e,t,n){this.extension=e,this.extension&&(this.extension.component=this,this.extension.data=t,this.extension.helper=n,this.extension.create())},t.prototype.exitFullScreen=function(){this.extension&&this.extension.exitFullScreen()},t.prototype.resize=function(){this.extension&&this.extension.resize()},t}(p.a),y=function(e,t){var n,i=!1,r="string"==typeof e?document.getElementById(e):e;if(!r)throw new Error("UV target element not found");r.innerHTML="";var o=document.createElement("div");r.appendChild(o);var s=document.createElement("div");o.appendChild(s);var c=function(){n&&(i?(o.style.width=window.innerWidth+"px",o.style.height=window.innerHeight+"px"):(o.style.width=r.offsetWidth+"px",o.style.height=r.offsetHeight+"px"),n.resize())};return window.addEventListener("resize",(function(){c()})),window.addEventListener("orientationchange",(function(){setTimeout((function(){c()}),100)})),(n=new v({target:s,data:t})).on("created",(function(e){c()}),!1),n.on("externalResourceOpened",(function(e){setTimeout((function(){c()}),100)}),!1),n.on("reload",(function(e){e.isReload=!0,n.set(e)}),!1),n.on("toggleFullScreen",(function(e){if(i=e.isFullScreen,!e.overrideFullScreen)if(i){var t=function(e){if(e.webkitRequestFullscreen)return e.webkitRequestFullscreen;if(e.mozRequestFullScreen)return e.mozRequestFullScreen;if(e.msRequestFullscreen)return e.msRequestFullscreen;if(e.requestFullscreen)return e.requestFullscreen;return!1}(o);t&&(t.call(o),c())}else{var n=function(){if(document.webkitExitFullscreen)return document.webkitExitFullscreen;if(document.msExitFullscreen)return document.msExitFullscreen;if(document.mozCancelFullScreen)return document.mozCancelFullScreen;if(document.exitFullscreen)return document.exitFullscreen;return!1}();n&&(n.call(document),setTimeout((function(){c()}),100),setTimeout((function(){c()}),1e3))}}),!1),n.on("error",(function(e){console.error(e)}),!1),n.on("bookmark",(function(e){var t=o.ownerDocument.URL,n=a.o.getUrlParts(t),i=n.pathname+n.search+o.ownerDocument.location.hash;i.startsWith("/")||(i="/"+i),e.path=i,console.log("bookmark",e)}),!1),$(document).on("fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange",(function(e){("webkitfullscreenchange"===e.type&&!document.webkitIsFullScreen||"fullscreenchange"===e.type&&!document.fullscreenElement||"mozfullscreenchange"===e.type&&!document.mozFullScreen||"MSFullscreenChange"===e.type&&null===document.msFullscreenElement)&&n.exitFullScreen()})),n.on("collectionIndexChange",(function(e){n.dataProvider.set("c",e)}),!1),n.on("manifestIndexChange",(function(e){n.dataProvider.set("m",e)}),!1),n.on("canvasIndexChange",(function(e){n.dataProvider.set("cv",e)}),!1),n.on("rangeChange",(function(e){n.dataProvider.set("rid",e)}),!1),n};n.d(t,"URLDataProvider",(function(){return c})),n.d(t,"Viewer",(function(){return v})),n.d(t,"init",(function(){return y}))}])}));